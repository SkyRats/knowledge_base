<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="alternate" type="application/rss+xml" href="/knowledge_base/blog/rss.xml" title="Knowledge Base RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/knowledge_base/blog/atom.xml" title="Knowledge Base Atom Feed"><title data-react-helmet="true">Compilamento do Firmware e Calibra√ß√£o do Drone | Knowledge Base</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://skyrats.github.io/knowledge_base/docs/Firmwares/IntroPX4"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Compilamento do Firmware e Calibra√ß√£o do Drone | Knowledge Base"><meta data-react-helmet="true" name="description" content="Compilando Firmware"><meta data-react-helmet="true" property="og:description" content="Compilando Firmware"><link data-react-helmet="true" rel="shortcut icon" href="/knowledge_base/img/logoPretoTransparente.svg"><link data-react-helmet="true" rel="canonical" href="https://skyrats.github.io/knowledge_base/docs/Firmwares/IntroPX4"><link data-react-helmet="true" rel="alternate" href="https://skyrats.github.io/knowledge_base/docs/Firmwares/IntroPX4" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://skyrats.github.io/knowledge_base/docs/Firmwares/IntroPX4" hreflang="x-default"><link rel="stylesheet" href="/knowledge_base/assets/css/styles.9e939927.css">
<link rel="preload" href="/knowledge_base/assets/js/runtime~main.6fdda161.js" as="script">
<link rel="preload" href="/knowledge_base/assets/js/main.4f4f452d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/knowledge_base/"><div class="navbar__logo"><img src="/knowledge_base/img/logoPretoTransparente.svg" alt="Skyrats Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/knowledge_base/img/logoBrancoTransparente.png" alt="Skyrats Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title"></b></a><a class="navbar__item navbar__link navbar__link--active" href="/knowledge_base/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/knowledge_base/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/SkyRats/knowledge_base" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">üåú</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">üåû</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/knowledge_base/docs/intro">Introdu√ß√£o</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/knowledge_base/docs/Convencoes-de-Codigo">Conven√ß√µes de C√≥digo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/knowledge_base/docs/introHW">Introdu√ß√£o ao Hardware</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Componentes - M√≥dulos</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Componentes Eletr√¥nicos</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Firmwares</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/knowledge_base/docs/Firmwares/IntroArdupilot">Ardupilot for Skyrats</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/knowledge_base/docs/Firmwares/IntroPX4">Compilamento do Firmware e Calibra√ß√£o do Drone</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/knowledge_base/docs/Firmwares/Introdu√ß√£o ao MAVLink">MAVLINK</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Linux</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Simuladores</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Voo autonomo</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">old</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Compilamento do Firmware e Calibra√ß√£o do Drone</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="compilando-firmware">Compilando Firmware<a aria-hidden="true" class="hash-link" href="#compilando-firmware" title="Direct link to heading">‚Äã</a></h2><p>O primeiro passo antes de come√ßar a compilar o Firmware √© conectar o drone ao seu computador, portanto conecte-os utilizando-se de um cabo USB. </p><p><strong>OBS</strong>: Utilize o cabo pra conectar o drone ao computador! N√£o fa√ßa pela telemetria pois compilar o firmware √© uma tarefa pesada para se fazer por telemetria.</p><p>Depois de conectados, abra seu navegador de arquivos e v√° at√© sua pasta de drivers: <code>/Firmware/src/drivers</code>. L√° se encontram todos os seus drivers. Caso n√£o encontre o driver que procuras, baixe-o e salve nesta pasta.
Depois de encontrar a pasta do Driver desejado, abra-o e procure pelo arquivo dos par√¢metros, como por exemplo <code>parameters.c</code> e altere o par√¢metro de acordo com sua necessidade, desabilitando-o, habilitando-o e fazendo isso de acordo com seu tipo de entrada. </p><p>Com os par√¢metros do Firmware alterados, v√° para <code>/Firmware/boards</code>. Cada pasta encontrada aqui √© um Firmware diferente, escolha portanto o Firmware o qual voc√™ utiliza. Escolhido um Firmware, selecione a vers√£o que voc√™ possui. No nosso caso o nosso caminho foi <code>/Firmware/boards/px4/fmu-v2/</code>.
Nessa paste procure pelo arquivo o qual apresenta todos os drives habilitados ou n√£o habilitados, no nosso caso ele se chama <code>multicopter.cmake</code>, mas ele pode apresentar outro nome no seu computador, isso tamb√©m  de acordo com o Firmware que voc√™ utiliza. Fa√ßa uma copia dele e o renomeie da forma que for mais pr√°tica para voc√™, pois voc√™ ir√° utiliza-lo.</p><p>A pixhawk, controladora o qual usamos, apresenta uma mem√≥ria limitada, uma caracter√≠stica de sistemas embarcados, e portanto geralmente habilita-se apenas os Drivers necess√°rios para compilar.
Habilite ent√£o os drivers que voc√™ precisar, isso dentro do arquivo copiado e renomeado, pois n√£o queremos alterar o arquivo original. </p><p>Feito isso, abra seu terminal e d√™ <code>/Firmware</code>. Dado o comando, compile o Firmware utilizando-se do arquivo que voc√™ editou, no nosso caso o comando foi <code>make px4_fmu-v2_multicoptereditado</code>.
Ele pode demorar um pouco, mas isso ocorre porque √© um comando pesado.
Mas uma vez compilado, n√£o √© necess√°rio compila-lo novamente a n√£o ser que haja mudan√ßas nos Drivers ou no Firmware utilizado. </p><p>Enquanto ele compila, √© recomend√°vel que se salve os par√¢metros de sua controladora antes de dar o upload do Firmware novo. Ele √© um arquivo <code>.params</code> e pode ser salvado pelo QGroundControl.
Com o QGroundControl abra o <code>Vehicle Setup</code> (tr√™s engrenagens na parte superios esquerda), des√ßa at√© os <code>Parameters</code>, clique em <code>Tools</code> (na parte superior direita), e selecione <code>Save to file .params</code></p><p>Depois de compilado, basta dar o upload. No nosso caso o comando foi <code>make px4_fmu-v2_multicoptereditado upload</code>.
Conclu√≠do o upload, seu Firmware est√° compilado e instalado na sua controladora de voo.</p><p>Caso precise de ajuda com o compilamento acesse: <a href="https://dev.px4.io/master/en/setup/building_px4.html" target="_blank" rel="noopener noreferrer">Building the code - PX4</a>.  </p><hr><h2 class="anchor anchorWithStickyNavbar_y2LR" id="calibra√ß√£o">Calibra√ß√£o<a aria-hidden="true" class="hash-link" href="#calibra√ß√£o" title="Direct link to heading">‚Äã</a></h2><p>Para calibra√ß√£o, iremos primeiro carregar o arquivo <code>.params</code> que foi salvo anteriormente, ou que possu√≠mos salvado no computador. Iremos ent√£o rebootar para que o processo se complete.
Uma forma bacana de fazer isso √© abrindo o <code>Analyze</code> (desenho de um papel com uma lupinha ao lado), indo em <code>MavLink Console</code> e digitando na barra de comando inferior <code>reboot</code>. </p><p>Carregado os par√¢metros e rebootado, precisamos selecionar o tipo de veiculo utilizado, portanto v√° em <code>Vehicle Setup</code>, abra o <code>Airframe</code> e selecione o que condiz com o seu. </p><p>Feito isso, √© necess√°rio calibrar os sensores, ent√£o v√° em <code>Sensors</code>. Note que alguns deles apresentar√£o bolinhas vermelhas ao seu lado, este ser√£o os sensores que voc√™ precisar√° calibrar. </p><p>Para calibrar, ser√° necess√°rio movimentar o drone, portanto √© recomend√°vel que utilize-se da Telemetria pra estabelecer a comunica√ß√£o entre o drone e o QGroundControl. Desconecte o cabo USB entre o drone e o computador, e tamb√©m o USB que liga a Jetson √† Pixhawk, conecte a Ground station no seu computador e ligue o seu drone. Conclu√≠do isso eles deveriam se conectar.</p><p>Uma vez conectados, note que no <code>Summary</code> aparecem os mais variados itens, no qual se a bolinha apresenta-se vermelha, √© necess√°rio uma corre√ß√£o antes de executar um voo.</p><p>Novamente, em <code>Sensors</code>, cheque os sensores que se apresentam em vermelho e os calibre. Clique no Sensor, aparecer√° uma barra sua lateral direita, l√° clique em <code>OK</code> e ele te redirecionar√° para a p√°gina de calibra√ß√£o do sensor. Cada sensor possui tarefas espec√≠ficas para que a calibra√ß√£o seja feita, execute-as de acordo com as instru√ß√µes e pronto, este sensor estar√° calibrado. </p><p>Um problema o que voc√™ pode se deparar √© que sua controla de voo possui dire√ß√µes pr√© definidas como Yaw, Pitch e Roll, mas que n√£o condizem com a orienta√ß√£o o qual voc√™ est√° usando. Para corrigir, a aba que aparece a sua direita possui a op√ß√£o de rotacionar essas orienta√ß√µes girando determinada quantidade de graus entorno de tal eixo. Ap√≥s selecionada a op√ß√£o adequada √© necess√°rio rebootar, depois de rebootar veja se o problema foi corrigido.</p><p>Caso precise de ajuda com as orienta√ß√µes acesse: <a href="https://docs.px4.io/master/en/config/flight_controller_orientation.html" target="_blank" rel="noopener noreferrer">Roll, Pitch and Yaw - PX4</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/SkyRats/knowledge_base/tree/main/docs/../docs/Firmwares/IntroPX4.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/knowledge_base/docs/Firmwares/IntroArdupilot"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ <!-- -->Ardupilot for Skyrats</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/knowledge_base/docs/Firmwares/Introdu√ß√£o ao MAVLink"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">MAVLINK<!-- --> ¬ª</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#compilando-firmware" class="table-of-contents__link toc-highlight">Compilando Firmware</a></li><li><a href="#calibra√ß√£o" class="table-of-contents__link toc-highlight">Calibra√ß√£o</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/knowledge_base/docs/intro">Intro</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://skyrats.com.br/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Site<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.instagram.com/skyrats_drones/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Instagram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.facebook.com/skyrats/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/knowledge_base/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/SkyRats" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2022 Skyrats Knowledge Base. Built with Docusaurus.</div></div></div></footer></div>
<script src="/knowledge_base/assets/js/runtime~main.6fdda161.js"></script>
<script src="/knowledge_base/assets/js/main.4f4f452d.js"></script>
</body>
</html>