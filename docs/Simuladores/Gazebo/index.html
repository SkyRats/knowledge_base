<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="alternate" type="application/rss+xml" href="/knowledge_base/blog/rss.xml" title="Knowledge Base RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/knowledge_base/blog/atom.xml" title="Knowledge Base Atom Feed"><title data-react-helmet="true">Gazebo | Knowledge Base</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://skyrats.github.io/knowledge_base/docs/Simuladores/Gazebo"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Gazebo | Knowledge Base"><meta data-react-helmet="true" name="description" content="√â um simulador que usamos aqui na Skyrats para simular as miss√µes que vamos realizar com o drone na vida real."><meta data-react-helmet="true" property="og:description" content="√â um simulador que usamos aqui na Skyrats para simular as miss√µes que vamos realizar com o drone na vida real."><link data-react-helmet="true" rel="shortcut icon" href="/knowledge_base/img/logoPretoTransparente.svg"><link data-react-helmet="true" rel="canonical" href="https://skyrats.github.io/knowledge_base/docs/Simuladores/Gazebo"><link data-react-helmet="true" rel="alternate" href="https://skyrats.github.io/knowledge_base/docs/Simuladores/Gazebo" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://skyrats.github.io/knowledge_base/docs/Simuladores/Gazebo" hreflang="x-default"><link rel="stylesheet" href="/knowledge_base/assets/css/styles.9e939927.css">
<link rel="preload" href="/knowledge_base/assets/js/runtime~main.4a551237.js" as="script">
<link rel="preload" href="/knowledge_base/assets/js/main.4f4f452d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/knowledge_base/"><div class="navbar__logo"><img src="/knowledge_base/img/logoPretoTransparente.svg" alt="Skyrats Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/knowledge_base/img/logoBrancoTransparente.png" alt="Skyrats Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title"></b></a><a class="navbar__item navbar__link navbar__link--active" href="/knowledge_base/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/knowledge_base/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/SkyRats/knowledge_base" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">üåú</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">üåû</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/knowledge_base/docs/intro">Introdu√ß√£o</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/knowledge_base/docs/Convencoes-de-Codigo">Conven√ß√µes de C√≥digo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/knowledge_base/docs/introHW">Introdu√ß√£o ao Hardware</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Componentes - M√≥dulos</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Componentes Eletr√¥nicos</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Firmwares</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Linux</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Simuladores</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/knowledge_base/docs/Simuladores/Gazebo">Gazebo</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Voo autonomo</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">old</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Gazebo</h1></header><p>√â um simulador que usamos aqui na Skyrats para simular as miss√µes que vamos realizar com o drone na vida real.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="b√°sicos">B√°sicos<a aria-hidden="true" class="hash-link" href="#b√°sicos" title="Direct link to heading">‚Äã</a></h2><p>Para instalar ele, as instru√ß√µes no seguinte guia j√° fazem isso: <a href="https://github.com/SkyRats/knowledge_base/blob/main/guias/Instalacao.md" target="_blank" rel="noopener noreferrer">https://github.com/SkyRats/knowledge_base/blob/main/guias/Instalacao.md</a>; se precisar de mais informa√ß√µes sobre sua instala√ß√£o: <a href="http://gazebosim.org/tutorials?tut=install_ubuntu" target="_blank" rel="noopener noreferrer">http://gazebosim.org/tutorials?tut=install_ubuntu</a>.</p><p>O comando abaixo abre o gazebo</p><p><code>gazebo &lt;op√ß√µes de inicializa√ß√£o&gt;</code></p><p>Mas tamb√©m da para abr√≠-lo com mais condi√ß√µes. Pode abrir diretamente um mundo usando o mesmo comando colocando o caminho para o¬†<code>.world</code>, ou colocando o nome do arquivo estando na pasta world. Por exemplo:¬†<code>gazebo exemplo.world</code>¬†Mais uma explica√ß√£o ou informa√ßes de uso sobre o comando ou codigo</p><p>Tamb√©m pode iniciar o gazebo fazendo a simula√ß√£o da PX4. Estando na raiz do Firmware d√™ o comando:</p><p><code>make px4_sitl gazebo</code></p><p>E tamb√©m pode inciar o Gazebo junto com o ROS usando o roslaunch, e √© bom por que da para abrir rosnodes, packages e outras fun√ß√µes do ros junto.</p><p><code>roslaunch gazebo_ros &lt;exemplo.launch&gt;</code></p><p>No roslaunch pode colocar v√°rios argumentos de incializa√ß√£o,¬†<a href="http://gazebosim.org/tutorials/?tut=ros_roslaunch" target="_blank" rel="noopener noreferrer">clique aqui para ver</a></p><p><a href="http://gazebosim.org/tutorials?tut=quick_start" target="_blank" rel="noopener noreferrer">Tutorial de inicializa√ß√£o do gazeb</a>o</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="os-arquivos">Os arquivos<a aria-hidden="true" class="hash-link" href="#os-arquivos" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="models">Models<a aria-hidden="true" class="hash-link" href="#models" title="Direct link to heading">‚Äã</a></h3><p>S√£o os modelos que aparecem no mundo, por exemplo: caixas, paredes, cen√°rios, dummies e at√© o pr√≥prio drone.</p><p>Dentro do gazebo, n√≥s temos dois jeitos para criar models e um para edi√ß√£o, sendo eles:</p><p>Na barra cima do painel de simula√ß√£o:</p><p><img alt="imgs/Untitled.png" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAAWCAYAAACVIF9YAAAF1ElEQVRYCd1Wa1NTSRDND9LyX+gPslT4YG7eD9SE8EhAQsEKsotgIIguzyQkN+SJJCFBEASs0t9xtk7fTN7hsbtVW+uHrrl3prunz/TpnjE9ePAAv7KY7t27B8r9+/cbouZ6jdRT+jetK91eesqH2refjtJrHTt11T5qbF03PXr0CP9Hefjw4a3iNg0ODqApgxgcpLTO/ZffKp7OsV9M3bGbNE2DEovFAkOac2qtOZqhaUqu0+tes1g0UAxf9KG+O0djjbFYrVbYbDYRfnOun52hz/Wmb5PalCMdOZ0ucdo6r0Cr4MxmFYARWLuuAaJ1jgHRh83GYBnkzXa0YTxDQ0Pw+33w+/3ybbfbBWCrf+XP5XLB7Xa3rTcA8nS4ODk5IY4VKLvNBpfTiaGhFxgeHsbExARmZ2ex+O4dVlZWMDMzI3Yq8NaNrVYLHA47JicnEYlE8OnTJ6yvf8DCwlsEAgEwWOq02vDb5XJiamoKOzs7yOVyODg4EMlkMtje3kZ4aqrLjgcyNjYm8Wtmc8NnG0Cv14vXr1/D4XDUqWoRQB8/rmM3FkMqlUI+n8fh4SHKlbJIoVjE2loUo2MjcDhpZ2SQgXu9Hiwu/iE25UoFpXIJxUIO6bSOjY2N+l7dIEcCAQF2dnaGs/NzfLu4wPm3b7i4vMTp16/I5nJyqAZlm7QPBoOYng6DDFNxdAHkaTvs9gbA5eVlcfr17AxfvnxBtVZDtVrF0VEFRwRZ+iyAY/EYXvleNRyTXnNzczg5OZEgGSjtmA1mRddTiMdicurUVQFZNA0ToRDK5TIIUAGT8eICJ6encmBMRqsdM3gtQFKMfJcMtgBcWl4WpyrAYrGIQqEgkisUkKfk89iN7cLn80OrNwGfzwdd13F5dYUfP37g+/fv4ufzQdEAmNaRSMQRWYnA4/VCq2eeAEOhECqVCs7Pz8XmqFoVwGQLaRqLxe6ewX4AmUGC42bMAMERUKckEgn4/H5omtHFpqenUSqXcXV1hZ8/f+Ly8lKyzwPKZPaRSqewl9zD1vYW/MPDdcZokAxOTAhA7lur1QxwhQL2c1k5tN3dXXjc7rZm2CuDLJMGRQmQae9HUVLkOoA8VXY6bsQamH+7IIBIbYI7PT2VoHkw+r6OlG4AZOZHR0e7KFo5OgJtCbBUKsmBZrIZpHQdtwdobQfYi6LMIHl/E8BmBg2A4XAYhUJeAmS9lg4/S/az2ayAS+pJyeD2zrZ0Z9W1WYuKop0A05m02N4WIH11ZbCzBgmQ4LgZa6EXRXP5PJLJpEHReg2+fPkSW1ubYM0ViwatGaCeNrKXTCWRSCbk+iBzmHnVaBRAlkWtVsXh4YFkUGX+HwHspOji4iKOj48bdGENkWatQNlsuCkbC5sMA+Udx5bNOtvPZrFPeqVTIDBmj+A2tzYRHA+KrgLHMRQMCi15qNVaVbLPPfdZu6mU3I9uV/uDpFcN0ldbBrspqkl98HKtHR+DdxlbvDSYQkE6mp5OI5FMYW1tDUMvXrRlwuV24c3cHHbjMeyl9hBPxEEqE/SfmxuYCofbWr2A1DQ5qHg8LldMuVzCwUERpDazTx9LS0tdj4QGwPBt7sHGRa9Jp3I4nHJ9fFhfx8raByz8/g7TM7MIhkLwDY/A6x6Cw+5o62oMll2Md1VgJCB34spKRF4/b357A7/PD5vVBms94wKu8UgwXlV8JS2/X0ZkdRUslfn5eYyPj4PxtOrzmwC5xldOn4veIqfi8bhhk0dtsyYYKCnn9njkznI53bDbnbDbHPUMGI/gzk3VP0Hy+eWhvccjT7/WS1rptY7cky8qPh9pw5HvZJut++VDOwJ0u13yeuK38mUi2rvI8+d302/3/RxmM+WuPv6unRmmx48f41cW07NnA+glAwODPed76XLu6dNnePLkacPmrvadfv8te9Pq6iqi0SjUGF2Ntv9HjX/q9BPaUt5HIk2dut+oGq+xV35X63s3/43YlA8VY7+xU49+/gJrSYAheETT2AAAAABJRU5ErkJggg=="></p><p>Esses 3 bot√µes podem criar um cubo, uma bola e um cilindro, todos com propriedades de in√©rcia e colis√£o.</p><p>Indo em Edit‚ÜíBuilding Editor</p><p>![imgs/Untitled%201.png]<!-- -->(./assets/Untitled 1.png)</p><p>Nessa parte voc√™ criar casas e outras constru√ß√µes urbanas ou relacionadas, pois facilita bastante.</p><p>Para usar:</p><p>Para fazer as paredes, janelas, portas e escadas, voc√™ primeiramente seleciona o tipo, cor e textura no painel da esquerda, e &quot;desenha&quot; em vista superior na malha branca superior a constru√ß√£o a ser feita. Pode tamb√©m ver que tudo √© dividido em &quot;levels&quot;, esses s√£o os andares das constru√ß√µes.</p><p>Model Editor:</p><p>Tem dois caminhos, o primeiro, a partir de nenhum objeto √©: Edit‚ÜíModel editor, o outro voc√™ pode modificar um model existente, selecione ele, no display de simula√ß√£o ou no painel esquerdo, depois clique com bot√£o direito ‚Üí Edit Model.</p><p>Ambos v√£o abrir o painel do model editor.</p><p>Nesse painel, seu objeto selecionado a ser editado fica em laranja, o resto branco(ambos transparentes).</p><p>No painel a esquerda, na aba insert, voc√™ pode fazer algumas coisas, como colocar mais objetos, sendo as &quot;simple shapes&quot;, ou &quot;custom shapes&quot;(para outros models feitos fora do gazebo, vou explicar depois), na aba model, voc√™ pode deixar o objeto static, que deixa ele fixado no mundo(isso n√£o afeta a caixa de colis√£o, ele apenas n√£o consegue se mover), pode adicionar plugins, e visualizar links e joints, e dar auto-disable.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="joints">Joints:<a aria-hidden="true" class="hash-link" href="#joints" title="Direct link to heading">‚Äã</a></h3><p>![imgs/Untitled%202.png]<!-- -->(./assets/Untitled 2.png)</p><p>No model editor, na barra superior, assim como na imagem acima, voc√™ pode criar &quot;joints&quot;, elas s√£o liga√ß√µes entre models, ou entre links de algum model, (links s√£o &quot;models de models&quot;, ou melhor, partes de um model que teem representa√ß√£o pr√≥pria, no drone por exemplo, tem o link do frame, dos rotores e p√°s, do LiDar, etc..). Essas liga√ß√µes podem ser de v√°rios tipos, cada um com sua caracter√≠stica, por exemplo, a joint ball √© uma liga√ß√£o com rota√ß√£o livre em 6 eixos (x, y, z, roll, pitch, yaw), tem a revolute joint, que permite rota√ß√£o em um eixo, o qual voc√™ seleciona o eixo no qual vai ser o livre, entre outros...</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="corda-no-gazebo">Corda no Gazebo<a aria-hidden="true" class="hash-link" href="#corda-no-gazebo" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="funcionamento">Funcionamento<a aria-hidden="true" class="hash-link" href="#funcionamento" title="Direct link to heading">‚Äã</a></h3><p>O pacote criado pela Skyrats possui um script capaz de criar um model que simula uma corda no Gazebo. A ideia principal √© utiliza-la para miss√µes que envolvam o carregamento de objetos, como a Outdoor e Swarm.</p><p>Como o Gazebo s√≥ √© capaz de simular corpos r√≠gidos, que n√£o √© o caso de uma corda, algumas adapta√ß√µes precisaram ser feitas. A corda foi criada por meio da uni√£o de v√°rios links, no formato de cilindro, empilhados um acima do outro. Para uni-los, foi utilizado um joint do tipo ball, que permite rota√ß√£o em todos os eixos. Assim, a corda √© formada por um conjunto de corpos r√≠gidos unidos para dar a impress√£o de que atuam como uma corda.</p><p>Portanto, o realismo da simula√ß√£o √© diretamente proporcional a quantidade de links. Quanto mais links o modelo tiver para um mesmo tamanho, maior ser√° a semelhan√ßa com uma corda real. Entretanto, um n√∫mero muito alto de links pode afetar o FPS e o real time factor, deixando a simula√ß√£o lenta, o que, em alguns casos, chega a ser inutiliz√°vel. Baseado em testes emp√≠ricos, 10 a 20 links para uma corda de um metro costuma ser o ideal para conciliar a performance e o desempenho.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="como-utilizar">Como utilizar<a aria-hidden="true" class="hash-link" href="#como-utilizar" title="Direct link to heading">‚Äã</a></h3><p>Para utilizar o script, basta entrar no diret√≥rio scripts do pacote de simula√ß√£o e executar Corda.py. O programa ir√° pedir que voc√™ insira a quantidade de links desejados e o tamanho de cada link. Dessa forma, √© poss√≠vel controlar o tamanho final da corda realizando uma conta simples: n√∫mero de links vezes tamanho do link. Ap√≥s digitar essas entradas, o model da corda estar√° na pasta models do pacote de simula√ß√£o, onde √© poss√≠vel utilizar diretamente no Gazebo utilizando a aba insert caso voc√™ tenha feito setup.bash.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="explicacao-do-script">Explicacao do Script<a aria-hidden="true" class="hash-link" href="#explicacao-do-script" title="Direct link to heading">‚Äã</a></h3><p>O script funciona de uma forma muito simples. Nele, existem duas fun√ß√µes: uma para criar um link e outra para colocar uma joint entre dois links. A primeira, quando chamada, ir√° escrever no arquivo SDF que ser√° criado todos os atributos necess√°rios (posi√ß√£o, massa, momento de in√©rcia e a geometria da caixa de colis√£o e do visual) para criar o SDF de um link cil√≠ndrico. </p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">buildLink</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">tamanho</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;   &lt;link name=\&quot;link_&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;\&quot;&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;    &lt;pose&gt;0 0 &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> tamanho</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;/pose&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;    &lt;inertial&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;    &lt;mass&gt;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> tamanho</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;/mass&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;    &lt;/inertial&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;    &lt;collision name=\&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;\&quot;&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;      &lt;pose&gt;0 0 0&lt;/pose&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;      &lt;geometry&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;       &lt;cylinder&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;        &lt;radius&gt;0.012&lt;/radius&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;        &lt;length&gt;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tamanho</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;/length&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;       &lt;/cylinder&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;      &lt;/geometry&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;     &lt;/collision&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;     &lt;visual name=\&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;\&quot;&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;      &lt;pose&gt;0 0 0&lt;/pose&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;      &lt;geometry&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;       &lt;cylinder&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;        &lt;radius&gt;0.012&lt;/radius&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;        &lt;length&gt;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tamanho</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;/length&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;       &lt;/cylinder&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;      &lt;/geometry&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;     &lt;/visual&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;   &lt;/link&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>A segunda fun√ß√£o √© respons√°vel por criar uma joint do tipo ball e coloc√°-la na posi√ß√£o correta entre dois links.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">buildJoint</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tamanho</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;   &lt;joint name=\&quot;joint &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;\&quot; type=\&quot;ball\&quot;&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;    &lt;parent&gt;link_&quot;</span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;/parent&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;    &lt;child&gt;link_&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;/child&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;    &lt;pose&gt;0 0 &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.5</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> tamanho</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;/pose&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;    &lt;physics&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;    &lt;/physics&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;   &lt;/joint&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Por fim, o resto do script √© respons√°vel por abrir e fechar o arquivo, pedir que o usu√°rio insira o tamanho e a quantidade de links, criar o cabe√ßalho do SDF e chamar as fun√ß√µes buildLink e buildJoint quantas vezes for necess√°rio.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">tamanho </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">float</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">input</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Por favor, insira o tamanho de cada link: &quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">quantidade </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">input</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Por favor, insira a quantidade de links: &quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">f </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;../../models/Rope/model.sdf&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;w&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;&lt;?xml version=\&quot;1.0\&quot;?&gt;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;&lt;sdf version=\&quot;1.5\&quot;&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot; &lt;model name=\&quot;Corda\&quot;&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;  &lt;self_collide&gt;true&lt;/self_collide&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> i </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">quantidade</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        buildLink</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tamanho</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">else</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        buildLink</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tamanho</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        buildJoint</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tamanho</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;&lt;/model&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;&lt;/sdf&gt;\n&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="como-funciona-o-arquivo-model">Como funciona o arquivo model?<a aria-hidden="true" class="hash-link" href="#como-funciona-o-arquivo-model" title="Direct link to heading">‚Äã</a></h2><p>Ele, basicamente precisa de dois arquivos, um sendo <code>.config</code>, e outro <code>.sdf</code>ou <code>.urdf</code>. Todos funcionando na linguagem XML.</p><p>O .config tem esse estilo:</p><p><a href="https://github.com/SkyRats/simulation/blob/master/models/drone_indoor/model.config" target="_blank" rel="noopener noreferrer">https://github.com/SkyRats/simulation/blob/master/models/drone_indoor/model.config</a></p><p>Onde √© declarado o nome do model, vers√£o do model, a vers√£o do sdf(1.6), configura√ß√µes do autor e descri√ß√µes do objeto.</p><p>O .sdf tem esse estilo:</p><p><a href="https://github.com/SkyRats/simulation/blob/master/models/drone_indoor/model.sdf" target="_blank" rel="noopener noreferrer">https://github.com/SkyRats/simulation/blob/master/models/drone_indoor/model.sdf</a></p><p>Todas as coisas do objeto est√£o nesse arquivo, por exemplo, a mesh, plugins, orienta√ß√µes, add de links, add de outros models, joints, materials, e todo o resto poss√≠vel.</p><p>Como √© muito grande as coisas, temos muitos exemplos no nosso reposit√≥rio simulation e outras infos sobre o .sdf e seus atributos aqui: <a href="http://sdformat.org/spec?ver=1.7&amp;elem=model" target="_blank" rel="noopener noreferrer">http://sdformat.org/spec?ver=1.7&amp;elem=model</a></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="worlds">Worlds<a aria-hidden="true" class="hash-link" href="#worlds" title="Direct link to heading">‚Äã</a></h2><p>Eles s√£o os mundos no gazebo, ou seja, s√£o meio que uma jun√ß√£o de models com suas posi√ß√µes e configura√ß√µes.</p><p>Eles podem ser configurados direto no gazebo, adicionando coisas no painel de simula√ß√£o, sendo pelo painel esquerdo, adicionando modelos na parte &quot;insert&quot;, e na aba world visualizar as configura√ß√µes existentes do mundo, nas aba de cima, pode mudar a configura√ß√£o de posi√ß√£o, rota√ß√£o e escala manualmente dos models, adicionar fontes de luz e mexer a camera.</p><p>Pelo arquivo .world, da para fazer e adicionar todas as configura√ß√µes do mundo, adicionando models, mudar posi√ß√£o, rota√ß√£o, escala dos mesmos, adicionar plugins de mundo e configurar a GUI, sendo essa infinitamente customiz√°vel ( Vou explicar mais para frente ), como por exemplo, adicionar interfaces com bot√µes, labels, etc, 100% customiz√°veis, que podem fazer qualquer coisa dentro do gazebo, customizar configura√ß√µes de ilumina√ß√£o, c√¢mera e c√©u, entre outros.</p><p>Temos v√°rios exemplos de .worlds no nosso reposit√≥rio simulation, al√©m disso, todas as configura√ß√µes para o .world tem aqui: <a href="http://sdformat.org/spec?ver=1.7&amp;elem=world" target="_blank" rel="noopener noreferrer">http://sdformat.org/spec?ver=1.7&amp;elem=world</a></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="adicionar-meshs-de-outros-programas">Adicionar Meshs de Outros Programas<a aria-hidden="true" class="hash-link" href="#adicionar-meshs-de-outros-programas" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="quais-os-arquivos">Quais os arquivos?<a aria-hidden="true" class="hash-link" href="#quais-os-arquivos" title="Direct link to heading">‚Äã</a></h3><p>No gazebo, p/ usar meshs externas, os principais tipos de arquivos suportados pelo sdf arquivos .dae, .obj, .stl. Com observa√ß√£o de que o .obj e o .stl n√£o suporta materiais/texturas, o .dae √© melhor n√£o ser usado para transportar texturas pois ele d√° problemas com sombras fixas nesse transporte de arquivos; em rela√ß√£o a desempenho/qualidade, o .dae √© o mais &quot;leve&quot;, enquanto o .stl √© mais &quot;pesado&quot;, por√©m ambos s√£o bem otimizados; como compara√ß√£o o .stl √© superior na maioria dos casos.</p><p>Em rela√ß√£o as texturas, os tipos de arquivos citado acima n√£o suportam/n√£o suportam bem. O recomendado √© usar scripts de materiais. O seguinte link explica muito bem como fazer: <a href="http://gazebosim.org/tutorials?tut=color_model" target="_blank" rel="noopener noreferrer">http://gazebosim.org/tutorials?tut=color_model</a></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="como-adicionar-a-mesh">Como adicionar a mesh?<a aria-hidden="true" class="hash-link" href="#como-adicionar-a-mesh" title="Direct link to heading">‚Äã</a></h3><p>Primeiro cria uma pasta para o model, exemplo: <code>mkdir model; cd model</code> , depois crie os arquivos de config, sdf, e outra pasta para guardar a mesh: <code>mkdir meshes; touch model.config model.sdf</code> </p><p>Nisso, voc√™ coloca a mesh dentro da pasta, configura seus arquivos .sdf e .config. P/ adicionar a mesh no .sdf, s√≥ usar um &quot;include&quot; dentro da parte da configura√ß√£o do link, como exemplo:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI xml"><pre tabindex="0" class="prism-code language-xml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">geometry</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">mesh</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">uri</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">model://model/meshes/mesh.stl</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">uri</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">mesh</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">geometry</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Lembre-se que deve-se colocar o link para a mesh na colision box e no visual.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="programa√ß√£o-no-gazebo-e-plugins">Programa√ß√£o no Gazebo e Plugins<a aria-hidden="true" class="hash-link" href="#programa√ß√£o-no-gazebo-e-plugins" title="Direct link to heading">‚Äã</a></h2><p>Tudo que vimos at√© agora √© uma pequena parte do que da para fazer com o gazebo, com plugins, ele fica 100% configur√°vel e ajust√°vel p/ qualquer simula√ß√£o.</p><p>Por ser infinitamente longo, vou ensinar o jeito de como buscar e come√ßar a fazer alguma programa√ß√£o/plugin em cima do gazebo e explicar alguns c√≥digos.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="como-funciona">Como funciona?<a aria-hidden="true" class="hash-link" href="#como-funciona" title="Direct link to heading">‚Äã</a></h3><p>Os plugins do gazebo s√£o em C++ OO e se dividem em 3 tipos principais, os de model, de world ou de GUI.</p><p>Os de model s√£o, como o nome j√° diz, inicializados em models, por exemplo, dentro do .sdf:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI xml"><pre tabindex="0" class="prism-code language-xml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">include</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">plugin</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value" style="color:#e3116c"> </span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag attr-value" style="color:#e3116c">wind_gazebo</span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">filename</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value" style="color:#e3116c"> </span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag attr-value" style="color:#e3116c">libgazebo_wind_plugin.so</span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">robotNamespace</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">linkName</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">base_link</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">linkName</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">xyzOffset</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">0 0 0</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">xyzOffset</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">windForceMean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">10</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">windForceMean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">windForceMax</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">50</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">windForceMax</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">windForceVariance</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">0</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">windForceVariance</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">windDirectionMean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">0 1 0</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">windDirectionMean</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">windDirectionVariance</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">0</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">windDirectionVariance</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">plugin</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">uri</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">model://model</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">uri</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">include</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Esse √© um exemplo de como adicionar um plugin com par√¢metros dentro do sdf, no caso o plugin do vento.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="como-declarar-os-tipos">Como declarar os tipos?<a aria-hidden="true" class="hash-link" href="#como-declarar-os-tipos" title="Direct link to heading">‚Äã</a></h3><p>Para indicar qual o tipo de plugin, coloque no c√≥digo o seguinte comando, sendo para modelo, gui ou world. Coloque ele depois de tudo ou antes de tudo,(em cima ou embaixo dos m√©todos, nunca dentro de nenhum).</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">GZ_REGISTER_GUI_PLUGIN</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NomeDaClasse</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">GZ_REGISTER_MODEL_PLUGIN</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NomeDaClasse</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">GZ_REGISTER_WORLD_PLUGIN</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NomeDaClasse</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Al√©m disso, os plugins de model possuem duas formas de rodar, uma √∫nica no Load do model, e outra no OnUpdate(Como se fosse um while(1)... obs: n√£o fa√ßam while(1) pfv).</p><p>Como exemplo temos o m√©todo load do plugin &quot;GetDropZonePositions&quot;</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">physics</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">ModelPtr _parent</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sdf</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">ElementPtr _sdf</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ignition</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">math</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">Pose3d dz_clean_pose </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> _parent</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">WorldPose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ignition</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">math</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">Vector3</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">double</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> dzc_p </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> dz_clean_pose</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Pos</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">double</span><span class="token plain"> CP_V</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">dzc_p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">X</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dzc_p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Y</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dzc_p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Z</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            gzmsg </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Dropzone pose:&quot;</span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;\n\tX = &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> CP_V</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;\n\tY = &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> CP_V</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;\n\tZ = &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> CP_V</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> std</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>essa fun√ß√£o load recebe dois atributos, no caso, o _parent que √© o pr√≥prio model dentro do mundo, e o _sdf que √© o sdf do model que foi inserido no mundo. No caso, a fun√ß√£o dessa fun√ß√£o .-. √© de dar no in√≠cio do model a posi√ß√£o dele no mapa, pois ele foi inserido de forma aleat√≥ria usando o modo population do .world.</p><p>Primeiro, ele cria um objeto de Pose3d, que representa a posi√ß√£o do objeto no mundo, e atribui a ele a posi√ß√£o do mundo usando o m√©todo WorldPose() do model _parent, depois disso, ele cria um vector3, que √© um objeto com informa√ß√µes sobre posi√ß√£o em x,y,z e nele atribui o vector3d de dentro do pose 3d usando o m√©todo Pos(), e nisso ele coloca um vetor de 3 posi√ß√µes cada uma das posi√ß√µes e depois printa elas com gzmsg, p aparecer destacado no terminal como mensagem do gazebo.</p><p>E como exemplo do m√©todo OnUpdate temos o do plugin dos Dynamic Obstacles:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">OnUpdate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token comment" style="color:#999988;font-style:italic">//1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">toggle_status</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">model</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">SetLinearVel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ignition</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">math</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">Vector3d</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">model</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">SetAngularVel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ignition</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">math</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">Vector3d</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token comment" style="color:#999988;font-style:italic">//2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">double</span><span class="token plain"> v</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ignition</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">math</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">Vector3</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">double</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> curr_pos </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">link</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">WorldCoGPose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Pos</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">         </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">double</span><span class="token plain"> x_direction </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">curr_pos </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">point_0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Dot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">direction</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">//3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">goal_point </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x_direction </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">distance</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    v </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">vel</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    v </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">vel</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">goal_point </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token comment" style="color:#999988;font-style:italic">//4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x_direction </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    v </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">vel</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    v </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">vel</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">goal_point </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        </span><span class="token comment" style="color:#999988;font-style:italic">//5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">model</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">SetLinearVel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">v</span><span class="token operator" style="color:#393A34">*</span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">direction</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">model</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">SetAngularVel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ignition</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">math</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">Vector3d</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>A fun√ß√£o est√° dividida em 5 partes, com os respectivos coment√°rios. Como explicado anteriormente, a fun√ß√£o OnUpdate roda a cada atualiza√ß√£o do mundo(alguns milissegundos, tudo depende do Real Time Factor), parecido com a ideia do &quot;void loop()&quot; do arduino; come√ßando pela parte  da fun√ß√£o  <code>//1</code>; com o toggle_status, ele verifica se a movimenta√ß√£o dos obst√°culos foi ativada pelo  usu√°rio(veremos isso mais p frente em plugins de interface); se ela estiver desativada ele desliga a velocidade dos objetos, linear e angular, e retorna a fun√ß√£o. No <code>//2</code> , ele declara uma vari√°vel double v, que mais para a frente vai receber valores de velocidade, depois ele cria uma vari√°vel do tipo Vector3 em double, que √© como se fosse um vetor cartesiano, com 3 dimens√µes, por√©m em formato de objeto ao inv√©s de vari√°vel, e esse Vector3, com nome curr_pos, recebe a posi√ß√£o do objeto naquele instante, usando o m√©todo do m√©todo do link &quot;WorldCoGPose().Pos()&quot; para retornar a posi√ß√£o cartesiana do mesmo em Vector3, e em outra vari√°vel double, a x_direction, recebe o produto escalar(.Dot()) entre a dire√ß√£o entre o ponto inicial e final do ciclo(aparece em outras partes do c√≥digo) e a posi√ß√£o atual dele, para assim saber o sentido que ele est√° percorrendo na trajet√≥ria. Em <code>//3</code> , entra no loop assumido que o objeto est√° se movendo em dire√ß√£o ao ponto 1 da trajet√≥ria, e nisso ele verifica se o x_direction, que √© o produto escalar entre o vetor posi√ß√£o do objeto e da dire√ß√£o, sendo ele maior que a dist√¢ncia se o x_direction coincidir com a sua chegada no ponto 1, se for verdadeiro, ele assume a velocidade positiva ao V, caso contr√°rio, ele assume velocidade negativa e coloca como ponto de destino o ponto 0, assim, no <code>//4</code> , estando em dire√ß√£o do ponto 0(ponto de in√≠cio), ele verifica se o x_direction √© maior/igual a zero, se for, ele ainda est√° em dire√ß√£o ao ponto 0, assumindo velocidade negativa, caso contr√°rio ele assume velocidade positiva e toma como dire√ß√£o o ponto 1. E no <code>//5</code> , ele coloca no objeto as velocidades, no caso sendo a angular como 0 fixa, para ele n√£o ter movimenta√ß√£o angular.</p><p>Os plugins de mundo, tem como maior finalidade modificar o mundo em um instante inicial, pois ele s√≥ tem a condi√ß√£o de ser realizado com o m√©todo &quot;Load&quot;, tem como o exemplo o m√©todo do &quot;Attach Rope&quot; (<a href="https://github.com/SkyRats/simulation/blob/master/plugins/attach_rope.cc" target="_blank" rel="noopener noreferrer">https://github.com/SkyRats/simulation/blob/master/plugins/attach_rope.cc</a>)</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="obs">OBS::<a aria-hidden="true" class="hash-link" href="#obs" title="Direct link to heading">‚Äã</a></h3><p>Por mais que os plugins tem os m√©todos Load ou OnUpdate, que permitem que ele rode uma ou mais vezes, ou em Loop, temos o sistema de msgs, que abre mais infinitas op√ß√µes... falarei mais para a frente</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="plugins-de-gui">Plugins de GUI<a aria-hidden="true" class="hash-link" href="#plugins-de-gui" title="Direct link to heading">‚Äã</a></h3><p>Esses plugins permitem que n√≥s possamos criar uma nova interface para o gazebo, n√£o s√≥ com bot√µes, mas com displays, barras de inser√ß√µes, e infinitas possiblidades.</p><p>![imgs/Untitled%203.png]<!-- -->(./assets/Untitled 3.png)</p><p>Como exemplo n√≥s temos do plugin feito em 2020 para facilitar e controlar as simula√ß√µes, vou explicar resumidamente o c√≥digo:</p><p>(Obs: vou mostrar o .cpp, mas vale muito a pena ir olhando o .h do c√≥digo, vai ajudar muito no entendimento)</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;sstream&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;gazebo/msgs/msgs.hh&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;simulation/skyrats_interface.hh&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;ignition/msgs.hh&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&quot;simulation/common.h&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;fstream&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;math.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">namespace</span><span class="token plain"> gazebo</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">GZ_REGISTER_GUI_PLUGIN</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">GUIExampleSpawnWidget</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">GUIExampleSpawnWidget</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">GUIExampleSpawnWidget</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token comment" style="color:#999988;font-style:italic">//1.1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">GUIPlugin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gzmsg </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Hello world&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> std</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">counter </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">wind_status </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">smoke_status </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">setStyleSheet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;QFrame { background-color : rgba(95, 139, 250, 255); color : blue; }&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  QHBoxLayout </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">mainLayout </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> QHBoxLayout</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  QFrame </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">mainFrame </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">QFrame</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  QVBoxLayout </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">frameLayout </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">QVBoxLayout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  QPushButton </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">WindButton </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">QPushButton</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">tr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;ON/OFF WIND&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">WindButton</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SIGNAL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">clicked</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SLOT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">WindButton</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  QPushButton </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">SmokeButton </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">QPushButton</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">tr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;ON/OFF SMOKE&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SmokeButton</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SIGNAL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">clicked</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SLOT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">SmokeButton</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  QPushButton </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">ObstacleButton </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">QPushButton</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">tr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;ON/OFF OBSTACLE&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ObstacleButton</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SIGNAL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">clicked</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SLOT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">ObstacleButton</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  QPushButton </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">AttachButton </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">QPushButton</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">tr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Rope Attach&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">AttachButton</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SIGNAL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">clicked</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">SLOT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">AttachButton</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//7</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  QLabel </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">Skyrats_txt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">QLabel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Skyrats Simulator v1.0&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  frameLayout</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">addWidget</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Skyrats_txt</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  frameLayout</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">addWidget</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">WindButton</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  frameLayout</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">addWidget</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SmokeButton</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  frameLayout</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">addWidget</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ObstacleButton</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  QLabel </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">indoor_txt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">QLabel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Indoor Simulation&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  frameLayout</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">addWidget</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">indoor_txt</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  frameLayout</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">addWidget</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">AttachButton</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  QLabel </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">outdoor_txt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">QLabel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Outdoor Simulation&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  frameLayout</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">addWidget</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">outdoor_txt</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//9</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mainFrame</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">setLayout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">frameLayout</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mainLayout</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">addWidget</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mainFrame</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//11</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  frameLayout</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">setContentsMargins</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  mainLayout</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">setContentsMargins</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">setLayout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mainLayout</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">move</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">resize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">160</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">235</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//12</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">node </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> transport</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">NodePtr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> transport</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">node</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">Init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">factoryPub </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">node</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">Advertise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">msgs</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">Factory</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;~/factory&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">wind_toggle_pub </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">node</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">Advertise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">msgs</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">Int</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;~/wind_toggle&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">smoke_pub </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">node</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">Advertise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">msgs</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">Scene</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;~/scene&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">obstacle_toggle_pub </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">node</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">Advertise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">msgs</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">Int</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;~/obstacle_toggle&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">attach_pub </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">node</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">Advertise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">msgs</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">Int</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;~/rope_attach&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/////////////////////////////////////////////////</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">GUIExampleSpawnWidget</span><span class="token operator" style="color:#393A34">::</span><span class="token operator" style="color:#393A34">~</span><span class="token function" style="color:#d73a49">GUIExampleSpawnWidget</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//13</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token class-name">GUIExampleSpawnWidget</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">WindButton</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  msgs</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">Int msg</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">wind_status </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">wind_status</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  msg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set_data</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">wind_status</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">wind_toggle_pub</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">Publish</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">msg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gzmsg </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Wind status: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> wind_status </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> std</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token class-name">GUIExampleSpawnWidget</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">SmokeButton</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  msgs</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">Scene smk_msg</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  msgs</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">Fog</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> fog </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> msgs</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">Fog</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">smoke_status </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"> smoke_status</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  smk_msg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set_name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;smoke_toggle&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">smoke_status </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    smk_msg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">clear_fog</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fog</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">set_start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10000.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fog</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">set_density</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fog</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">set_end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">30000.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    smk_msg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set_allocated_fog</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fog</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">smoke_status </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fog</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">set_start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fog</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">set_density</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">300.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fog</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">set_end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    smk_msg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set_allocated_fog</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fog</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">smoke_pub</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">Publish</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">smk_msg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gzmsg </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Smoke status: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> smoke_status </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> std</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gzmsg </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;A_Fog status: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> smk_msg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">has_fog</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> std</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token class-name">GUIExampleSpawnWidget</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">ObstacleButton</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  msgs</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">Int obstacle_msg</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">obstacle_status </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">obstacle_status</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  obstacle_msg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set_data</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">obstacle_status</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">obstacle_toggle_pub</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">Publish</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">obstacle_msg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gzmsg </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Obstacle status: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> obstacle_status </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> std</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token class-name">GUIExampleSpawnWidget</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">AttachButton</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gzmsg </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Rope attached message sent...&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> std</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  msgs</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">Int attach_msg</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  attach_msg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set_data</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">attach_pub</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">Publish</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">attach_msg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>O c√≥digo ta dividido em 13 partes para facilitar a explica√ß√£o:</p><p><code>//1</code> ‚Üí √â registrado o plugin como plugin de interface(obs: isso pode ser declarado no come√ßo ou no final, embora na maioria dos plugins seja no final)</p><p><code>//1.1</code> ‚Üí Nos plugins de GUI, n√£o existe m√©todo &quot;Load&quot;, o m√©todo para plugins GUI, com o mesmo funcionamento √© o construtor.</p><p><code>//2</code> ‚Üí Define o estilo do &quot;fundo&quot; da interface adicionada ao gazebo, no caso foi utilizado o padr√£o RGB, mas existem outros, tudo isso pode ser visto na documenta√ß√£o do QWidgets.</p><p><code>//3</code> ‚Üí Cria um layout do QWidget em formato de caixa para guardar a interface</p><p><code>//4</code> ‚Üí Cria o frame principal(Obs: o frame √© a √°rea toda ocupada pela interface, e o layout √© onde ficar√£o os itens da interface).</p><p><code>//5</code> ‚Üí Cria uma layout para o frame.</p><p><code>//6</code> ‚Üí Aqui ele cria os bot√µes da interface, criando um ponteiro para eles e chamando um construtor, enviando uma string, sendo essa string a que aparecer√° em cima do bot√£o em sua implementa√ß√£o, ale·∏ø disso na pr√≥xima linha ele liga o bot√£o ao seu m√©todo, declarando seu tipo de funcionamento, como no exemplo, o cliked(), que funciona como um bot√£o de press√£o, que ele realiza uma √∫nica vez o c√≥digo ao ser precionado, necessitando ser pressionado denovo para uma nova execu√ß√£o do c√≥digo.</p><p><code>//7</code> ‚Üí Cria uma Label com uma string, sendo a Label alguma string/texto colocada no layout da interface.</p><p><code>//8</code> ‚Üí Ele adiciona todos os objetos criados no layout do frame, usando o m√©todo addWidget(). Obs: Os objetos s√£o colocados na ordem que s√£o escritos no c√≥digo, sendo de cima para baixo, como se fosse uma fila.</p><p><code>//9</code> ‚Üí Aqui ele coloca o layout principal do frame como sendo o layout criado anteriormente em que foi adicionado todos os widgets.</p><p><code>//10</code> ‚Üí Adiciona o outro layout criado como um widget do frame.</p><p><code>//11</code> ‚Üí Configura a margem dos dois layouts criados e adicionados, no caso setando as duas como 0 em todas as dimens√µes.</p><p><code>//12</code> ‚Üí Aqui ele cria os nodes e publishers que ser√£o usados nos c√≥digos dos m√©todos de cada bot√£o, essa parte vou explicar com bastante detalhes mais para a frente.</p><p><code>//13</code> ‚Üí Aqui, por final ele cria os m√©todos de cada bot√£o adicionado. Em cada m√©todo, que foi declarado no .h e associado a cada bot√£o no passo 6 √© descrito o c√≥digo que rodar√° de acordo com o esquema de press√£o do bot√£o, no caso dos &quot;clicked()&quot;, cada c√≥digo desse rodar√° uma vez a cada vez que o bot√£o for pressionado.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="msgs-do-gazebo">Msgs do Gazebo<a aria-hidden="true" class="hash-link" href="#msgs-do-gazebo" title="Direct link to heading">‚Äã</a></h2><p>Al√©m de tudo isso que j√° explicamos, outro jeito de modificar/criar coisas para simula√ß√£o no gazebo √© atrav√©s das msgs, sistema parecido com o ROS, onde cada pequena parte do gazebo se comunica com outras atrav√©s dela, por exemplo temos os bot√µes do nosso plugin Skyzebo 1.0, onde todos os bot√µes criam publishers, e estes enviam mensagens para outras coisas, como por exemplo ligar a fuma√ßa, que cria uma msg do tipo &quot;Fog&quot;, modifica ela para ter as caracter√≠sticas da fuma√ßa, depois √© criado uma vari√°vel do tipo scene, onde modificamos nela apenas a parte &quot;Fog&quot;, onde √© inclu√≠da a configura√ß√£o feita, e ap√≥s isso a mensagem √© publicada para que chegue no t√≥pico &quot;~/scene&quot; e assim modifique ele aplicando fuma√ßa no mundo. O c√≥digo do m√©todo desse bot√£o √© esse, onde tem informa√ß√µes explicadas em coment√°rios:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token class-name">GUIExampleSpawnWidget</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">SmokeButton</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  msgs</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">Scene smk_msg</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  msgs</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">Fog</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> fog </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> msgs</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">Fog</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//Criar as msgs necess√°rias</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">smoke_status </span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">!</span><span class="token plain"> smoke_status</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//Inverter o estado passado da fuma√ßa, para funcionar como um &quot;toggle&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  smk_msg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set_name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;smoke_toggle&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//Da o nome da msg da smoke</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">smoke_status </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    smk_msg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">clear_fog</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Se o estado da fuma√ßa for 0 ele limpa a fog, al√©m de inicializar ela bem longe do objeto que possui vis√£o, como camera do drono ou nossa vis√£o</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fog</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">set_start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10000.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fog</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">set_density</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fog</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">set_end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">30000.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    smk_msg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set_allocated_fog</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fog</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Coloca a msg modificada dentro da msg da scene</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">smoke_status </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//Aqui, ele ativa a fuma√ßa, al√©m de deixar seu √≠nicio bem pr√≥ximo do objeto com vis√£o.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fog</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">set_start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fog</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">set_density</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">300.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fog</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">set_end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10.0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    smk_msg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set_allocated_fog</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fog</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Coloca a msg modificada dentro da msg da scene</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">smoke_pub</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">Publish</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">smk_msg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// publica a mensagem </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gzmsg </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Smoke status: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> smoke_status </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> std</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gzmsg </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;A_Fog status: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> smk_msg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">has_fog</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> std</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//printa as informa√ß√µes no terminal</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Mas para que a msg seja publicada, tamb√©m √© necess√°rio criar o publisher e associar o node do gazebo a ele. Nesse mesmo publisher, da fuma√ßa, o publisher √© criado assim:</p><p>Primeiro, dentro da defini√ß√£o da classe, voc√™ declara o node e cria o publisher:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">transport</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">NodePtr node</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Define o node onde vai ser associado o gazebo nele</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">transport</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">PublisherPtr smoke_pub</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Define o publisher do bot√£o de toggle da fuma√ßa</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Agora, dentro do m√©todo &quot;Load&quot;, que √© o que roda no in√≠cio da simula√ß√£o, ou para plugins de GUI, no construtor dele:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">node </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> transport</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">NodePtr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> transport</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Coloca um node dentro da var√≠avel node criada</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">node</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">Init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// O m√©todo &quot;Init&quot; inicia o node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">smoke_pub </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">node</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">Advertise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">msgs</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">Scene</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;~/scene&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Declara a cria√ß√£o do publisher, colocando nele o tipo de msg e tamb√©m o t√≥pico</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Todo o sistema de msgs pode ser visualizado como &quot;mapa mental&quot; no site da api do gazebo: <a href="http://osrf-distributions.s3.amazonaws.com/gazebo/api/1.3.1/dir_856da1f3c0f82036884d2d586cbc0904.html" target="_blank" rel="noopener noreferrer">http://osrf-distributions.s3.amazonaws.com/gazebo/api/1.3.1/dir_856da1f3c0f82036884d2d586cbc0904.html</a></p><p>Al√©m disso, se precisar criar uma msg nova, a explica√ß√£o est√° aqui: <a href="http://gazebosim.org/tutorials?tut=custom_messages&amp;cat=transport" target="_blank" rel="noopener noreferrer">http://gazebosim.org/tutorials?tut=custom_messages&amp;cat=transport</a></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="msgs-comunica√ß√£o-entre-pluginsscripts">Msgs: Comunica√ß√£o entre Plugins/Scripts<a aria-hidden="true" class="hash-link" href="#msgs-comunica√ß√£o-entre-pluginsscripts" title="Direct link to heading">‚Äã</a></h3><p>Al√©m de usar as mgs para comunica√ß√£o com o sistema do gazebo diretamente, podemos usar elas para comunica√ß√£o entre plugins, funciona no mesmo esquema, a diferen√ßa √© que publicaremos em um t√≥pico para outro plugin dar subscribe e callback nele. Vou explicar com exemplos agora, pois com a no√ß√£o dada acima j√° √© necess√°rio para entender o funcionamento:</p><p>Como exemplo vou usar a comunica√ß√£o do &quot;rope_attach&quot;, plugin utilizado para conectar as cordas de uma certa carga nos drones.</p><p>Primeiramente, assim como no exemplo anterior √© declarado o node e o publisher dentro da declara√ß√£o da classe ( Obs: O node s√≥ precisa ser criado em uma vez por plugin. ):</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">transport</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">NodePtr node</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">transport</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">PublisherPtr attach_pub</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>E s√£o iniciados ao iniciar do gazebo:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">node </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> transport</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">NodePtr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> transport</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">node</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">Init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">attach_pub </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">node</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">Advertise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">msgs</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">Int</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;~/rope_attach&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>O c√≥digo do bot√£o, para publicar a mensagem para esse t√≥pico &quot;~/rope_attach&quot; ser√° bem simples, pois ele n√£o tem fun√ß√£o de toggle, pois a caixa √© presa apenas uma vez e n√£o √© solta ap√≥s isso, pois os drones pousam com ela, logo, esse bot√£o vai mandar uma mensagem do tipo &quot;int&quot; com o valor booleano de sinal ( 1 ):</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token class-name">GUIExampleSpawnWidget</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">AttachButton</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gzmsg </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Rope attached message sent...&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> std</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Printa no terminal a frase</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  msgs</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">Int attach_msg</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Cria uma msg do tipo int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  attach_msg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">set_data</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Associa em seu valor usando o m√©todo set_data o n√∫mero inteiro &quot;1&quot;, que tem como sentido ser um &quot;true&quot; booleano, apenas para enviar alguma coisa para o callback</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">attach_pub</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">Publish</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">attach_msg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Publica a mensagem</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Certo, a mensagem foi publicada, agora o outro plugin, script, ou o que for, precisa recebe-la. Ent√£o, precisaremos criar um node, um subscriber e um callback. O node e o subscriber tem a fun√ß√£o de estar la para receber a mensagem, e o subscriber inicia o m√©todo de callback sempre que recebe uma mensagem, enviando o objeto de msg recebido como par√¢metro para ele.</p><p>Primeiro, precisamos definir as coisas na classe(obs: isso tudo pode ser feito direto, sem .h e sem declara√ß√µes, mas isso vale apenas para os m√©todos), assim, criaremos o subscriber, o node e o namespace(Serve para declara√ß√µes do node handle, ver√° mais para a frente):</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">private</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        transport</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">SubscriberPtr attach_sub</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//Define o subscriber</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        transport</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">NodePtr node_handle_</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Define o node_handle_</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        std</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">string namespace_</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Cria o namespace</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">namespace_</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">kDefaultNamespace</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// M√©todo do namespace</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">AttachCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ConstIntPtr </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">msg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Define o m√©todo do callback</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Agora, com tudo criado, iremos para os m√©todos come√ßar a fazer tudo funcionar, primeiramente iremos no m√©todo que roda ao in√≠cio do funcionamento do gazebo, onde iremos receberemos o namespace(Caso existente), </p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> attach_rope</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">Load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">physics</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">WorldPtr _parent</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sdf</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">ElementPtr _sdf</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">world </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> _parent</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_sdf</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">HasElement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;robotNamespace&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//Aqui, ele observa se no sdf possui algum namespace, se tiver, ele assosia tal namespace √† nossa var√≠avel</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            namespace_ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> _sdf</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">GetElement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;robotNamespace&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">Get</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">std</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">string</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            gzerr </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;[attach_rope] Please specify a robotNamespace.\n&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//Desnecess√°rio</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        node_handle_ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> transport</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">NodePtr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> transport</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">Node</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//Cria o node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        node_handle_</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">Init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">namespace_</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Associa o namespace, vazio ou n√£o ao node</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        attach_sub </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> node_handle_</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;~/rope_attach&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">attach_rope</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">AttachCallback</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//**1** -&gt; Explicado abaixo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gzmsg </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;aaaaabriuuuu aqui krai: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> std</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Print de informa√ß√µes para debug... hehe</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><code>//**1**</code> ‚Üí Aqui √© inicializado o subscriber, tomem bastante cuidado, porque isso aqui da MUITO erro, e erros nada a ver... A partir do node handle, pegaremos um subscriber nele, e associaremos nele o t√≥pico que ele vai receber, passaremos o m√©todo de callback como par√¢metro, e tamb√©m passaremos a inst√¢ncia do plugin tamb√©m com o &quot;this&quot;.</p><p>Certo, ap√≥s isso temos o subscriber inicializado temos que fazer alguma coisa com a mensagem recebida, no caso, o callback faz isso, ele √© um m√©todo que √© chamado pelo subscriber toda vez que alguma mensagem √© recebida, e essa mensagem √© passada para esse calback, como exemplo temos o callback desse mesmo plugin, que vou explicar em coment√°rios porque ele √© bem longo...:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> attach_rope</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">AttachCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ConstIntPtr </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">msg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        physics</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">JointPtr joint_1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        physics</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">JointPtr joint_2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Criar vari√°veis de joint, que ser√£o as que ligar√£o as cordas nos drones</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ignition</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">math</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">Vector3d  z_axis </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ignition</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">math</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">Vector3d</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ignition</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">math</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">Vector3d  null_axis </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ignition</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">math</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">Vector3d</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ignition</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">math</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">Vector4d  null_axis4D </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ignition</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">math</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">Vector4d</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Cria algumas var√≠aveis em vectors, de 3 e 4 dimens√µes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        physics</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">ModelPtr corda_0 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">world</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">ModelByName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;swarm_box::swarm_box::Corda_0&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        physics</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">ModelPtr iris_0 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">world</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">ModelByName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;iris_0&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        physics</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">ModelPtr iris_1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain">  </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">world</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">ModelByName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;iris_1&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        physics</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">ModelPtr corda_1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">world</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">ModelByName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;swarm_box::swarm_box::Corda&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        physics</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">ModelPtr POSREF </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">world</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">ModelByName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;POS_REF&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        physics</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">ModelPtr NEGREF </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">world</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">ModelByName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;NEG_REF&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        physics</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">ModelPtr NULLREF </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">world</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">ModelByName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;NULL_REF&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        physics</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">ModelPtr FARREF </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">world</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">ModelByName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;FAR_REF&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        physics</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">ModelPtr spawn1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">world</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">ModelByName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;spawn1&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        physics</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">ModelPtr spawn2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">world</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">ModelByName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;spawn2&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Retorna os models necess√°rios presentes no mundo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">bool</span><span class="token plain"> f </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">bool</span><span class="token plain"> t </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">try</span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">//Aqui o ch√£o de sustenta√ß√£o √© removido para que n√£o tenha conflito das colisions box das muitas joints da corda com o pr√≥rpio ch√£o</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        spawn1</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">SetWorldPose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">FARREF</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">WorldPose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        spawn2</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">SetWorldPose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">FARREF</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">WorldPose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//Elas s√£o removidas sem dar um &quot;delete&quot; (√© poss√≠vel fazer isso sim! mas da mais problema) mas sim mandando elas para longe... kkkk</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gzmsg </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; \tDeleting ground...&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> std</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">runtime_error </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            gzmsg </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;GROUND REMOVE FAILED&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> std</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//Usando o esquema de try catch porque da muito erro isso de remover models mandando eles para longe.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gzmsg </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;\tAttaching rope...&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> std</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        joint_1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">world</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">Physics</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">CreateJoint</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;ball&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> corda_0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Cria a joint na corda de tipo ball, que tem rota√ß√£o 360¬∫</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        joint_1</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">Load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">corda_0</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">GetLink</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;link_10&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> iris_0</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">GetLink</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;base_link&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> NULLREF</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">WorldPose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Carrega a joint na sua posi√ß√£o e no iris</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        joint_1</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">Attach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">corda_0</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">GetLink</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;link_10&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> iris_0</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">GetLink</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;base_link&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Conecta ela no iris</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        joint_1</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">Init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Inicia a joint </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        joint_2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">world</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">Physics</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">CreateJoint</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;ball&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> corda_1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Cria a joint na corda de tipo ball, que tem rota√ß√£o 360¬∫</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        joint_2</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">Load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">corda_1</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">GetLink</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;link_10&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> iris_1</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">GetLink</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;base_link&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> NULLREF</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">WorldPose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Carrega a joint na sua posi√ß√£o e no iris</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        joint_2</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">Attach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">corda_1</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">GetLink</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;link_10&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">iris_1</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">GetLink</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;base_link&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Conecta ela no iris</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        joint_2</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">Init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Inicia a joint </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        spawn1</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">SetWorldPose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NULLREF</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">WorldPose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        spawn2</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">SetWorldPose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NULLREF</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">WorldPose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Manda as bases do spawn pra mais longe ainda... N√£o lembro por que fiz isso... Mas suave, se ta a√≠ tem motivo KKKKKK</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>No caso, nesse plugin a msg n√£o foi utilizada, pois o √∫nico objetivo era ligar uma √∫nica vez a joint caso o bot√£o fosse apertado, por√©m vou dar outro exemplo, dessa vez da msg sendo utilizada, o plugin que receber√° a msg ser√° o do vento, que tem um &quot;toggle&quot;, que funciona recebendo ou 1 ou 0 de uma var√≠avel int, tudo isso a partir de mais um bot√£o na interface. O c√≥digo do callback √©:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token class-name">GazeboWindPlugin</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">WindToggleCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ConstIntPtr </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">msg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">wind_status </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> msg</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token function" style="color:#d73a49">data</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Atribui o n√∫emro recebido no status do vento, que √© uma var√≠avel do objeto do plugin</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gzmsg </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Wind toggle&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> std</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">endl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Mensagem no terminal</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>O callback √© bem curto, pois ele s√≥ altera o valor de uma vari√°vel, que √© utilizada dentro do m√©todo OnUpdate.</p><p>O plugin do vento funciona assim: Ele pega o model em que ele est√° &quot;instalado&quot; e aplica uma for√ßa nele, assim se a vari√°vek &quot;wind_status&quot; tiver valor 0, ele n√£o mandar√° for√ßa nenhuma, caso contr√°rio ir√° mandar a for√ßa do vento. O c√≥digo √© um pouquinho longo, vou colocar apenas algumas linhas dele, por√©m ele est√° dentro do pacote simulation ‚Üí <a href="https://github.com/SkyRats/simulation/blob/master/plugins/gazebo_wind_plugin.cpp" target="_blank" rel="noopener noreferrer">https://github.com/SkyRats/simulation/blob/master/plugins/gazebo_wind_plugin.cpp</a></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token class-name">GazeboWindPlugin</span><span class="token operator" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">OnUpdate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> common</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">UpdateInfo</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> _info</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">wind_status </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Continua</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="dicas-para-programar-pro-gazebo">Dicas para programar pro gazebo:<a aria-hidden="true" class="hash-link" href="#dicas-para-programar-pro-gazebo" title="Direct link to heading">‚Äã</a></h2><ul><li>Improvisa mesmo, coloca umas caixas no mundo p/ dar getPose, colocar umas joint nada a v√™, enche de bot√£o, coloca os plugins p conversar, etc.. .etc...</li><li>Sempre que for fazer algum c√≥digo pro gazebo, todas as informa√ß√µes s√£o bem abertas e bem leg√≠veis de cada classe de cada m√©todo e vari√°vel do gazebo. A dica √© olhar no gazebo API, l√° tem TUDO, TUDO MESMO, e tudo bem explicadinho de cada m√©todo... Ent√£o sempre que precisar ver as coisas de uma classe procure: <code>&lt;nome da classe&gt;</code> class reference gazebo, primeiro link e s√≥ vai... Ou pode entrar no site do Gazebo API: <a href="https://osrf-distributions.s3.amazonaws.com/gazebo/api/dev/index.html" target="_blank" rel="noopener noreferrer">https://osrf-distributions.s3.amazonaws.com/gazebo/api/dev/index.html</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/SkyRats/knowledge_base/tree/main/docs/../docs/Simuladores/Gazebo.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/knowledge_base/docs/Linux/TransArqv"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ <!-- -->Transfer√™ncia de Arquivos</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/knowledge_base/docs/Voo autonomo/basics"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">V√¥o Aut√¥nomo<!-- --> ¬ª</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#b√°sicos" class="table-of-contents__link toc-highlight">B√°sicos</a></li><li><a href="#os-arquivos" class="table-of-contents__link toc-highlight">Os arquivos</a><ul><li><a href="#models" class="table-of-contents__link toc-highlight">Models</a></li><li><a href="#joints" class="table-of-contents__link toc-highlight">Joints:</a></li></ul></li><li><a href="#corda-no-gazebo" class="table-of-contents__link toc-highlight">Corda no Gazebo</a><ul><li><a href="#funcionamento" class="table-of-contents__link toc-highlight">Funcionamento</a></li><li><a href="#como-utilizar" class="table-of-contents__link toc-highlight">Como utilizar</a></li><li><a href="#explicacao-do-script" class="table-of-contents__link toc-highlight">Explicacao do Script</a></li></ul></li><li><a href="#como-funciona-o-arquivo-model" class="table-of-contents__link toc-highlight">Como funciona o arquivo model?</a></li><li><a href="#worlds" class="table-of-contents__link toc-highlight">Worlds</a></li><li><a href="#adicionar-meshs-de-outros-programas" class="table-of-contents__link toc-highlight">Adicionar Meshs de Outros Programas</a><ul><li><a href="#quais-os-arquivos" class="table-of-contents__link toc-highlight">Quais os arquivos?</a></li><li><a href="#como-adicionar-a-mesh" class="table-of-contents__link toc-highlight">Como adicionar a mesh?</a></li></ul></li><li><a href="#programa√ß√£o-no-gazebo-e-plugins" class="table-of-contents__link toc-highlight">Programa√ß√£o no Gazebo e Plugins</a><ul><li><a href="#como-funciona" class="table-of-contents__link toc-highlight">Como funciona?</a></li><li><a href="#como-declarar-os-tipos" class="table-of-contents__link toc-highlight">Como declarar os tipos?</a></li><li><a href="#obs" class="table-of-contents__link toc-highlight">OBS::</a></li><li><a href="#plugins-de-gui" class="table-of-contents__link toc-highlight">Plugins de GUI</a></li></ul></li><li><a href="#msgs-do-gazebo" class="table-of-contents__link toc-highlight">Msgs do Gazebo</a><ul><li><a href="#msgs-comunica√ß√£o-entre-pluginsscripts" class="table-of-contents__link toc-highlight">Msgs: Comunica√ß√£o entre Plugins/Scripts</a></li></ul></li><li><a href="#dicas-para-programar-pro-gazebo" class="table-of-contents__link toc-highlight">Dicas para programar pro gazebo:</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/knowledge_base/docs/intro">Intro</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://skyrats.com.br/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Site<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.instagram.com/skyrats_drones/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Instagram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.facebook.com/skyrats/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/knowledge_base/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/SkyRats" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2022 Skyrats Knowledge Base. Built with Docusaurus.</div></div></div></footer></div>
<script src="/knowledge_base/assets/js/runtime~main.4a551237.js"></script>
<script src="/knowledge_base/assets/js/main.4f4f452d.js"></script>
</body>
</html>