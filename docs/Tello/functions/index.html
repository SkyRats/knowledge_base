<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="alternate" type="application/rss+xml" href="/knowledge_base/blog/rss.xml" title="Knowledge Base RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/knowledge_base/blog/atom.xml" title="Knowledge Base Atom Feed"><title data-react-helmet="true">tello_integration.py | Knowledge Base</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://skyrats.github.io/knowledge_base/docs/Tello/functions"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="tello_integration.py | Knowledge Base"><meta data-react-helmet="true" name="description" content="A seguinte p√°gina tem a inten√ß√£o de descrever as fun√ß√µes principais do c√≥digo de controle tello_integration.py."><meta data-react-helmet="true" property="og:description" content="A seguinte p√°gina tem a inten√ß√£o de descrever as fun√ß√µes principais do c√≥digo de controle tello_integration.py."><link data-react-helmet="true" rel="shortcut icon" href="/knowledge_base/img/logoPretoTransparente.svg"><link data-react-helmet="true" rel="canonical" href="https://skyrats.github.io/knowledge_base/docs/Tello/functions"><link data-react-helmet="true" rel="alternate" href="https://skyrats.github.io/knowledge_base/docs/Tello/functions" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://skyrats.github.io/knowledge_base/docs/Tello/functions" hreflang="x-default"><link rel="stylesheet" href="/knowledge_base/assets/css/styles.9e939927.css">
<link rel="preload" href="/knowledge_base/assets/js/runtime~main.006661c3.js" as="script">
<link rel="preload" href="/knowledge_base/assets/js/main.061fd660.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/knowledge_base/"><div class="navbar__logo"><img src="/knowledge_base/img/logoPretoTransparente.svg" alt="Skyrats Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/knowledge_base/img/logoBrancoTransparente.png" alt="Skyrats Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title"></b></a><a class="navbar__item navbar__link navbar__link--active" href="/knowledge_base/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/knowledge_base/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/SkyRats/knowledge_base" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">üåú</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">üåû</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/knowledge_base/docs/intro">Introdu√ß√£o</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/knowledge_base/docs/Convencoes-de-Codigo">Conven√ß√µes de C√≥digo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/knowledge_base/docs/PID Tuning">PID Tuning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/knowledge_base/docs/Sky Hardware Quiz - Erros comuns e como resolv√™-los">Sky Hardware Quiz - Erros comuns e como resolv√™-los</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/knowledge_base/docs/Temas de competi√ß√µes que a Skyrats participa">Temas de competi√ß√µes que a com participa√ß√£o da Equipe Skyrats</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/knowledge_base/docs/introHW">Introdu√ß√£o ao Hardware</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Componentes - M√≥dulos</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Componentes Eletr√¥nicos</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Firmwares</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Linux</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Simuladores</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Tello</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/knowledge_base/docs/Tello/errors">Solucionando erros</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/knowledge_base/docs/Tello/extras">Outras funcionalidades</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/knowledge_base/docs/Tello/functions">tello_integration.py</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/knowledge_base/docs/Tello/ttt">ttt.py</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Voo autonomo</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">old</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>tello_integration.py</h1></header><p>A seguinte p√°gina tem a inten√ß√£o de descrever as fun√ß√µes principais do c√≥digo de controle tello_integration.py.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="vari√°veis-importantes">Vari√°veis importantes<a aria-hidden="true" class="hash-link" href="#vari√°veis-importantes" title="Direct link to heading">‚Äã</a></h2><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">SIMULATION </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> False </span><span class="token comment" style="color:#999988;font-style:italic"># False se estivermos rodando o script no Tello.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BATTERY </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">65</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Valor usado para simula√ß√£o</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ---------------------------- #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INTERFACE_FACTOR </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Increase for better resolution monitor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HAND_SIZE </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic"># Decrease for smaller hands</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="classe-drone">Classe Drone<a aria-hidden="true" class="hash-link" href="#classe-drone" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="init"><strong>init</strong>()<a aria-hidden="true" class="hash-link" href="#init" title="Direct link to heading">‚Äã</a></h3><p>Tem a inten√ß√£o de inicializar Mediapipe (mp) e vari√°veis. Al√©m disso, chama a fun√ß√£o startup que se conecta com o Tello, permitindo printar tamb√©m seu estado (bateria, altitude, velocidade, etc). </p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">def __init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.tello_startup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Inicializando Mediapipe</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.mp_drawing </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mp.solutions.drawing_utils</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.mp_drawing_styles </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mp.solutions.drawing_styles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.mp_hands </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mp.solutions.hands</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.state </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self.tello.get_current_state</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self.state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.tricks </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> True </span><span class="token comment" style="color:#999988;font-style:italic"># Assumindo que bateria est√° acima de 53%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> self.tello.get_height</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">: </span><span class="token comment" style="color:#999988;font-style:italic">#Importante para caso rodemos o c√≥digo com o Tello j√° decolado</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      self.height </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      self.takeoff </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      self.height </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self.tello.get_height</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      self.takeoff </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Inicializando vari√°veis</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.prev_vector </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.repeat </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.num_repeat </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># M√≠nimo para afirmar que foi feito um gesto </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="tello_startup"><strong>tello_startup()</strong><a aria-hidden="true" class="hash-link" href="#tello_startup" title="Direct link to heading">‚Äã</a></h3><p>Essa fun√ß√£o tem o intuito de conectar o Tello, permitindo rodar o script. Para isso, primeiro, cria-se um objeto da classe Tello (biblioteca DJI). Depois, conectamos com o drone e iniciamos o stream da c√¢mera.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Inicializa√ß√£o do Tello</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def tello_startup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># For Tello input:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.tello </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Tello</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Starts the tello object</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.tello.connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Connects to the drone</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.tello.streamon</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="get_tello_battery"><strong>get_tello_battery()</strong><a aria-hidden="true" class="hash-link" href="#get_tello_battery" title="Direct link to heading">‚Äã</a></h3><p>Fun√ß√£o que pega a bateria do Tello e atualiza a vari√°vel <code>self.tricks</code>. Essa vari√°vel √© Falsa, caso a bateria esteja abaixo de 53% (margem de erro de 3%), previnindo que o Tello pouse automaticamente ao tentar dar flips (s√≥ funcionam acima de 50% de bateria). O intuito √© chamar essa fun√ß√£o constantemente para atualizar sempre se √© poss√≠vel ou n√£o dar um flip.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Atualizar valor da bateria</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def get_tello_battery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> not SIMULATION:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.battery </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self.tello.get_battery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.battery </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> BATTERY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> self.battery </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">53</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.tricks </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> False</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.tricks </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> True</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="tello_no"><strong>tello_no()</strong><a aria-hidden="true" class="hash-link" href="#tello_no" title="Direct link to heading">‚Äã</a></h3><p>Fun√ß√£o que faz o Tello rotacionar como se estivesse dizendo &quot;N√£o&quot;. √â chamada quando a bateria est√° abaixo de 53%, no caso, e ele recebeu o comando de dar flip.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Negar truques por bateria insuficiente</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def tello_no</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">f</span><span class="token string" style="color:#e3116c">&quot;Bateria insuficiente! {self.battery}&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> not SIMULATION:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.tello.rotate_clockwise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.tello.rotate_counter_clockwise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">60</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.tello.rotate_clockwise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="return_to_pos"><strong>return_to_pos()</strong><a aria-hidden="true" class="hash-link" href="#return_to_pos" title="Direct link to heading">‚Äã</a></h3><p>Fun√ß√£o que faz o Tello retornar para posi√ß√£o inicial (estimada) ap√≥s dar um flip. O Tello pode ser inst√°vel ao fazer truques, principalmente se estiver em espa√ßo aberto com vento. A inten√ß√£o √© fazer ele se mover para um sentido dependendo da orienta√ß√£o do flip dado. </p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Voltar para a posicao que estava antes do flip dependendo da orienta√ß√£o que √© passada como par√¢metro</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def return_to_pos</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self, orientation</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> orientation </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;back&#x27;</span><span class="token builtin class-name">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;moving foward...&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> not SIMULATION:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.tello.move_forward</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">elif</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="keep_tello_alive"><strong>keep_tello_alive()</strong><a aria-hidden="true" class="hash-link" href="#keep_tello_alive" title="Direct link to heading">‚Äã</a></h3><p>Fun√ß√£o que manda um sinal para o Tello, evitando o pouso autom√°tico que ocorre se ele n√£o recebe comandos em 15 segundos.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">def keep_tello_alive</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Manda sinal para o tello n√£o pousar. Criamos uma fun√ß√£o, pois chamaremos em outra classe</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> not SIMULATION:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.tello.send_control_command</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;command&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="hand_keyboard_control"><strong>hand_keyboard_control()</strong><a aria-hidden="true" class="hash-link" href="#hand_keyboard_control" title="Direct link to heading">‚Äã</a></h3><p>Fun√ß√£o que controla o Tello a partir de gestos e do teclado, simultaneamente. Na interface principal, isso √© acessado apertando 1. </p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="ver-o-frame-da-c√¢mera"><em>Ver o frame da c√¢mera</em><a aria-hidden="true" class="hash-link" href="#ver-o-frame-da-c√¢mera" title="Direct link to heading">‚Äã</a></h4><p>Para acessar cada frame do Tello:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">self.image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self.tello.get_frame_read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">.frame  </span><span class="token comment" style="color:#999988;font-style:italic"># Stores the current streamed frame</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="n√£o-deixar-o-tello-pousar"><em>N√£o deixar o Tello pousar</em><a aria-hidden="true" class="hash-link" href="#n√£o-deixar-o-tello-pousar" title="Direct link to heading">‚Äã</a></h4><p>Para n√£o pousar o drone automaticamente, em loops, √© interessante colocar para mandar um sinal a cada 10 segundos.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> datetime.now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> - self.start </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> timedelta</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">seconds</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    self.keep_tello_alive</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    self.start </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> datetime.now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="detectar-m√£os-no-tello-e-a-mais-perto-da-c√¢mera"><em>Detectar m√£os no Tello e a mais perto da c√¢mera</em><a aria-hidden="true" class="hash-link" href="#detectar-m√£os-no-tello-e-a-mais-perto-da-c√¢mera" title="Direct link to heading">‚Äã</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">results </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> hands.process</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self.image</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>A pr√≥xima parte do c√≥digo verifica se a m√£o identificada √© A maior no frame. Fazemos isso calculando a √°rea do tri√¢ngulo formado entre os pontos 0, 5 e 17:</p><p><img alt="Mediapipe" src="/knowledge_base/assets/images/mediapipe-a0e4976de65576e7b39198f96c9e8a06.png"></p><p>A toler√¢ncia do tamanho pode ser redefinida no in√≠cio do c√≥digo, nas vari√°veis importantes (<code>HAND_SIZE</code>). </p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># √°rea do tri√¢ngulo central</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># lm = landmark</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    area </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/2 * abs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">lm0.x * </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">lm5.y - lm17.y</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> + lm5.x * </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">lm17.y - lm0.y</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> + lm17.x * </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">lm0.y - lm5.y</span><span class="token punctuation" style="color:#393A34">))</span><span class="token plain"> / self.abs_area</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> area </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> larger:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            true_hand </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> potential_hand</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            larger </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> area</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Acima, vemos que se a √°rea for grande o suficiente (maior que a maior m√£o anterior), a nova &quot;m√£o verdadeira&quot; √© a atual e a toler√¢ncia foi redefinida para a √°rea dessa m√£o nova.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="verificar-posi√ß√£o-de-cada-dedo"><em>Verificar posi√ß√£o de cada dedo</em><a aria-hidden="true" class="hash-link" href="#verificar-posi√ß√£o-de-cada-dedo" title="Direct link to heading">‚Äã</a></h4><p>Em seguida, caso haja uma &quot;m√£o verdadeira&quot;, ou seja, perto o suficiente, cria-se um vetor de dedos. Esse ser√° modificado caso o dedo esteja levantado (&quot;1&quot;) ou abaixado (&quot;0&quot;).</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Inicializa vetor de dedos</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">finger_vector </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>A ideia para verificar se o dedo est√° abaixado ou n√£o √© tra√ßar vetores entre os <em>landmarks</em>.
Veja o exemplo abaixo do polegar:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">dist0 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">marks</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">.x - marks</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">17</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">.x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">**2 + </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">marks</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">.y - marks</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">17</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">.y</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">**2 </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">**</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Dist√¢ncia entre pontos 5 e 17</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Toler√¢ncia (Quanto menor, mais conservadora √© a detec√ß√£o)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TOL </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.5</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Polegar</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Compara dist√¢ncias entre pontos para decidir quais dedos est√£o abertos ou fechados:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># polegar</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">finger_dist1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">marks</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">.x - marks</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">17</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">.x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">**2 + </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">marks</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">.y - marks</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">17</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">.y</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">**2 </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">**</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token plain">/2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> finger_dist1 </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> TOL*dist0:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    finger_vector</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    finger_vector</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Note que o que ele faz √© basicamente verificar se o polegar est√° para fora da m√£o ou para dentro (fechado), dependendo dos <em>landmarks</em> 4, 5 e 17. E a toler√¢ncia disso √© um pouco maior (1.5).
Veja um teste no modo <code>SIMULATION</code>:</p><p><img alt="Polegar" src="/knowledge_base/assets/images/polegares-34c0c9b04168fec90d09de1181d5f65e.png"></p><p>No momento em que mudamos para o polegar para fora, o c√≥digo identifica como &quot;flip right&quot; (direita do drone).
Mas como ele percebe a orienta√ß√£o do polegar?
Como todo vetor tem dire√ß√£o e <strong>sentido</strong>, podemos tamb√©m verificar se o polegar aponta para a direita ou para esquerda, vendo se o <em>landmark</em> 4 est√° com abscissa maior ou menor que <em>landmark</em> 17:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Orienta√ß√£o do polegar no eixo X</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> marks</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">.x - marks</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">17</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">.x </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.orientation_x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;right&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.orientation_x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;left&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>A partir disso, √© poss√≠vel aplicar a mesma l√≥gica para os outros dedos, utilizando <em>landmarks</em> que fa√ßam sentido. Uma estrat√©gia √© sempre comparar a dist√¢ncia do <em>landmark</em> 9 e 0 com a dist√¢ncia do ponto no extremo de cada dedo e do <em>landmark</em> 0. Um exemplo com o indicador:</p><p><img alt="Indicador" src="/knowledge_base/assets/images/comparacao-560bc510a917857573112f6cb2e3b6e6.png"></p><p>Veja que se a dist√¢ncia azul for maior que a vermelha, o indicador est√° levantado. Caso contr√°rio, ele est√° abaixado. O primeiro vetor seria representado por <code>[1, 1, 1, 1, 1]</code> e o segundo vetor seria <code>[1, 0, 1, 1, 1]</code>.</p><p><em>Confirmar gesto por contador de repeti√ß√£o</em></p><p>Para ter certeza que a pessoa est√° fazendo um gesto, √© verificado 30 vezes se √© o mesmo gesto sendo identificado. Para seguir a m√£o, √© verificado apenas 10 vezes para tornar mais r√°pida essa funcionalidade. Veja a estrutura base dessa l√≥gica:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> self.repeat </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> self.num_repeat: </span><span class="token comment" style="color:#999988;font-style:italic"># Se tiver detectado esse gesto v√°rias vezes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.get_tello_battery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Atualiza estado da bateria</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.command </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self.verify_commands</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">finger_vector</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Vai ver o que fazer com aquele gesto</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Reiniciar vari√°veis</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.prev_vector </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.repeat </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Se ainda n√£o tiver o n√∫mero m√≠nimo de repeti√ß√µes para seguir a m√£o</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Mesmo vetor encontrado</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> finger_vector </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> self.prev_vector:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.repeat </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Se encontrar um vetor diferente</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.repeat </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Vetor atual √© o vetor anterior da p≈ïoxima itera√ß√£o</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.prev_vector </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> finger_vector</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="identificar-comando-vindo-do-teclado"><em>Identificar comando vindo do teclado</em><a aria-hidden="true" class="hash-link" href="#identificar-comando-vindo-do-teclado" title="Direct link to heading">‚Äã</a></h4><p>Nessa mesma fun√ß√£o, tamb√©m h√° uma parte do loop que sempre recebe comandos vindoo do teclado (caso alguma tecla seja apertada). A estrutura base disso √© a seguinte:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token for-or-select variable" style="color:#36acaa">event</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> pg.event.get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.get_tello_battery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">#Atualiza estado de bateria</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> event.type </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> pg.KEYDOWN:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> event.key </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> pg.K_w: </span><span class="token comment" style="color:#999988;font-style:italic">#Exemplo com a tecla &quot;w&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Going foward...&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> not SIMULATION:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.tello.move_forward</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Move o drone para frente</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Para colocar comandos em outras teclas √© apenas repetir <code>if event.key == pg.K_x:</code> e adicionar uma a√ß√£o dentro da condi√ß√£o (sendo <code>x</code> uma tecla qualquer).</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="verify_commands"><strong>verify_commands()</strong><a aria-hidden="true" class="hash-link" href="#verify_commands" title="Direct link to heading">‚Äã</a></h3><p>Fun√ß√£o que vai verificar qual comando foi recebido a partir dos gestos com a m√£o identificada. Basicamente, comparamos o vetor recebido com o que queremos para mandar um comando para o Tello:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">elif</span><span class="token plain"> vector </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">1</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">: </span><span class="token comment" style="color:#999988;font-style:italic">#Vetor com indicador levantado apenas, &quot;1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> self.tricks and self.orientation_y </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;back&#x27;</span><span class="token builtin class-name">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Flip back!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> not SIMULATION:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    self.tello.flip_back</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.return_to_pos</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self.orientation_y</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Volta para posi√ß√£o inicial estimada</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.tello_no</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># N√£o possui bateria para fazer o flip</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Os outros comandos seguem a mesma estrutura. O que muda √© a a√ß√£o desejada dentro da condi√ß√£o.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="follow_hand"><strong>follow_hand()</strong><a aria-hidden="true" class="hash-link" href="#follow_hand" title="Direct link to heading">‚Äã</a></h3><p>Essa fun√ß√£o tenta seguir a m√£o identificada anteriormente. Ela √© acessada no <code>verify_commands()</code> quando o vetor dos dedos √© <code>[1, 1, 1, 1, 1]</code> (m√£o aberta). Ela recebe como par√¢metros as coordenadas do <em>landmark</em> 9 e as ordenadas dos extremos da m√£o (<em>landmark</em> 12 e 0). Assim, √© poss√≠vel tentar centralizar no frame da c√¢mera o <em>landmark</em> 9, com uma toler√¢ncia previamente definida na fun√ß√£o. Importante ressaltar que o ponto (0,0) √© no canto superior esquerdo e o ponto (1,1) √© no canto inferior direito. Veja a estrutura base dessa l√≥gica para uma centraliza√ß√£o da m√£o no eixo X:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">P_tol </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.075</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Quanto maior -&gt; menos responsivo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x_error </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pixel</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> - </span><span class="token number" style="color:#36acaa">0.5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># pixel[0] √© a abscissa do landmark 9</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> abs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x_error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> P_tol:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    x_error </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Ignora, se estiver dentro da toler√¢ncia -&gt; importante para n√£o floodar comando para o drone</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">x_vel </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> -int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100</span><span class="token plain">*x_error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> not SIMULATION:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mod_x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> abs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x_vel</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Arredonda velocidade</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> mod_x </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mod_x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> mod_x </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> x_vel </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.tello.move_left</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mod_x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Manda o Tello para a esquerda (velocidade negativa)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.tello.move_right</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mod_x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># Manda o Tello para a direita (velocidade positiva)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>A ideia inicial era mandar um comando de <code>self.tello.send_rc_control</code>, definindo uma velocidade para o eixo x, y e z. Entretanto, isso acabava por floodar o Tello de mensagens, inclusive com as tr√™s velocidades setadas para 0. Foi decidido ent√£o mover o Tello com o comando <code>self.tello.move_left</code> (ou right), dependendo de qu√£o descentralizado estiver o <em>landmark</em> 9. Al√©m disso, o Tello n√£o se move mais para cima ou para baixo. ELe segue a m√£o apenas no eixo X, por raz√µes de seguran√ßa e porque deixa o movimento mais fluido. Entretanto, deixamos uma estrutura no c√≥digo, caso algu√©m queira setar alguma velocidade para o Tello no eixo Y.
De qualquer forma, ainda adicionamos um limite de altura, para que ele n√£o suba muito, se f√≥ssemos alterar sua posi√ß√£o no eixo Y ao seguir a m√£o:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> not SIMULATION:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.height </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self.tello.get_height</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> self.height </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token plain">: </span><span class="token comment" style="color:#999988;font-style:italic"># Se estiver acima de 2 metros, deve descer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Too high, mooving down...&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.tello.move_down</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Para finalizar, colocamos tamb√©m uma medida de seguran√ßa para o Tello se afastar da m√£o, caso ela esteja muito perto. Isso √© feito medindo a dist√¢ncia entre os extremos da m√£o:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">z_error </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> abs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ext_up - ext_down</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Dist√¢ncia entre extremos da m√£o</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> not SIMULATION:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> z_error </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.8</span><span class="token plain">: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Too close! Moving backwards...&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.tello.move.back</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">#Move o Tello para tr√°s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        z_error </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Como a medida do topo at√© a base do frame √© 1, se a dist√¢ncia entre os <em>landmarks</em> 12 e 0 for maior que 0.8, o drone se afasta 30 cm da m√£o.
<img alt="Close" src="/knowledge_base/assets/images/close-aeab3510ca9022a5e5505736792f8b2c.png"></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="follow_camera_game"><strong>follow_camera_game()</strong><a aria-hidden="true" class="hash-link" href="#follow_camera_game" title="Direct link to heading">‚Äã</a></h3><p>Fun√ß√£o do jogo de c√¢meras, em que a pessoa deve tentar aparecer no frame do Tello enquanto o drone realiza movimentos de rota√ß√£o e descida/subida.</p><p>O jogo se inicia com o usu√°rio escolhendo um n√≠vel de dificuldade, que vai de 1 a 3, assim como o n√∫mero de fotos que deseja tirar. Tudo isso √© obtido pelo <code>input</code>. Basicamente, quanto mais dif√≠cil, menor √© o intervalo entre as fotos e a pessoa deve se movimentar mais r√°pido:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">time.sleep</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token plain">-int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">difficulty</span><span class="token punctuation" style="color:#393A34">))</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Se o Tello rotaciona, desce ou sobe √© aleat√≥rio, assim como o quanto que ele se move ou gira:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">choices </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;left&quot;</span><span class="token plain">, </span><span class="token string" style="color:#e3116c">&quot;right&quot;</span><span class="token plain">, </span><span class="token string" style="color:#e3116c">&quot;up&quot;</span><span class="token plain">, </span><span class="token string" style="color:#e3116c">&quot;down&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deg_choices </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">30</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">40</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">50</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">60</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dist_choices </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">20</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">30</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">40</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">choice </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> random.choice</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">choices</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> choice </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;left&quot;</span><span class="token builtin class-name">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    degrees </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> deg_choices</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">random.randint</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Girando&quot;</span><span class="token plain">, degrees, </span><span class="token string" style="color:#e3116c">&quot;¬∞ para a esquerda&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> not SIMULATION:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.tello.rotate_counter_clockwise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">degrees</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>A mesma estrutura se aplica √†s outras op√ß√µes. Um problema, entretanto, √© n√£o mandar o Tello para alturas muito grandes ou muito baixas. Por isso, colocamos um limite <code>minHeight</code> e <code>maxHeight</code> de 170 cm e 20 cm, respectivamente. Assim, se a dist√¢ncia aleat√≥ria para subir ou descer distoar desse par√¢metros, √© mandado o Tello se movimentar no sentido contr√°rio. Veja um exemplo:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> not SIMULATION:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    getHeight </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> self.tello.get_height</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">elif</span><span class="token plain"> choice </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;down&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    distance </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> dist_choices</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">random.randint</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> getHeight - distance </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> minHeight:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Descendo&quot;</span><span class="token plain">, distance, </span><span class="token string" style="color:#e3116c">&quot;cm&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> not SIMULATION:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            self.tello.move_down</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">distance</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            getHeight -</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> distance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else: </span><span class="token comment" style="color:#999988;font-style:italic">#if it is lower than the min height, move up instead</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Subindo&quot;</span><span class="token plain">, distance, </span><span class="token string" style="color:#e3116c">&quot;cm&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> not SIMULATION:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                self.tello.move_up</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">distance</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                getHeight </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> distance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Essa escolha aleat√≥ria de movimenta√ß√£o acontece dentro de um loop que √© repetido para o n√∫mero de fotos a serem tiradas (que foi escolhido pelo usu√°rio).</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token for-or-select variable" style="color:#36acaa">i</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">num_pictures</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Veja alguns dos resultados :)</p><p><img alt="Game" src="/knowledge_base/assets/images/CAMERA-ae1a0b8b1c30b7330740fa61fb00ab1f.png"></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="classe-interface">Classe Interface<a aria-hidden="true" class="hash-link" href="#classe-interface" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="init-1"><strong>init()</strong><a aria-hidden="true" class="hash-link" href="#init-1" title="Direct link to heading">‚Äã</a></h3><p>Essa fun√ß√£o chama outras fun√ß√µes e cria um objeto do tipo <code>Drone</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">def __init__</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string entity" style="color:#36acaa">\n</span><span class="token string" style="color:#e3116c">Bem vindo!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.tello </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Drone</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.print_commands</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    self.create_window</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="create_window"><strong>create_window()</strong><a aria-hidden="true" class="hash-link" href="#create_window" title="Direct link to heading">‚Äã</a></h3><p>Fun√ß√£o que cria janela da interface com o uso da biblioteca <code>Pygame</code>.
Para criar uma janela:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">self.f </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> INTERFACE_FACTOR </span><span class="token comment" style="color:#999988;font-style:italic"># AJustando tamanho da janela</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self.dim </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">500</span><span class="token plain">*self.f, </span><span class="token number" style="color:#36acaa">480</span><span class="token plain">*self.f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pg.init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self.win </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pg.display.set_mode</span><span class="token variable punctuation" style="color:#393A34">((</span><span class="token variable" style="color:#36acaa">self.dim[</span><span class="token variable number" style="color:#36acaa">0</span><span class="token variable" style="color:#36acaa">]</span><span class="token variable punctuation" style="color:#393A34">,</span><span class="token variable" style="color:#36acaa"> self.dim[</span><span class="token variable number" style="color:#36acaa">1</span><span class="token variable" style="color:#36acaa">]</span><span class="token variable punctuation" style="color:#393A34">))</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pg.display.set_caption</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Pygame&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Para criar um tipo de texto que posteriormente (em outra fun√ß√£o, em loop) ser√° adicionado na janela:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">font </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pg.font.Font</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;freesansbold.ttf&#x27;</span><span class="token plain">, int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">16</span><span class="token plain">+self.f*16</span><span class="token punctuation" style="color:#393A34">))</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">white </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">255</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">255</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">255</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">black </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">, </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self.text </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> font.render</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;SkyRats - Tello&#x27;</span><span class="token plain">, True, white, black</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>A mesma estrutura pode ser repetida para criar outros textos.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="print_commands"><strong>print_commands()</strong><a aria-hidden="true" class="hash-link" href="#print_commands" title="Direct link to heading">‚Äã</a></h3><p>Apenas printa os comandos da interface no terminal:</p><p><img alt="Print" src="data:image/png;base64,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"></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="interface_loop"><strong>interface_loop()</strong><a aria-hidden="true" class="hash-link" href="#interface_loop" title="Direct link to heading">‚Äã</a></h3><p>Loop da interface. Nela √© criada a janela e tamb√©m s√£o recebidos os comandos do teclado para acessar outras funcionalidades do programa, utilizando a mesma estrutura j√° vista antes na fun√ß√£o do <code>hand_keyboard_control()</code>. Aqui tamb√©m √© utilizada a fun√ß√£o <code>self.keep_tello_alive()</code> para evitar que o drone pouse automaticamente.
Para adicionar textos na janela do Pygame: </p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">d0 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token plain">*self.f</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">self.win.blit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self.text, </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">d0, d0</span><span class="token punctuation" style="color:#393A34">))</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Ap√≥s configurar como desejado a janela, voc√™ deve chamar <code>pg.display.update()</code> para fazer com que a janela realmente apare√ßa no monitor do usu√°rio:</p><p><img alt="Interface Pygame" src="/knowledge_base/assets/images/interfacepy-ae7939fa33b29be53a5969d97f723e74.png"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/SkyRats/knowledge_base/tree/main/docs/../docs/Tello/functions.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/knowledge_base/docs/Tello/extras"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ <!-- -->Outras funcionalidades</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/knowledge_base/docs/Tello/ttt"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">ttt.py<!-- --> ¬ª</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#vari√°veis-importantes" class="table-of-contents__link toc-highlight">Vari√°veis importantes</a></li><li><a href="#classe-drone" class="table-of-contents__link toc-highlight">Classe Drone</a><ul><li><a href="#init" class="table-of-contents__link toc-highlight"><strong>init</strong>()</a></li><li><a href="#tello_startup" class="table-of-contents__link toc-highlight"><strong>tello_startup()</strong></a></li><li><a href="#get_tello_battery" class="table-of-contents__link toc-highlight"><strong>get_tello_battery()</strong></a></li><li><a href="#tello_no" class="table-of-contents__link toc-highlight"><strong>tello_no()</strong></a></li><li><a href="#return_to_pos" class="table-of-contents__link toc-highlight"><strong>return_to_pos()</strong></a></li><li><a href="#keep_tello_alive" class="table-of-contents__link toc-highlight"><strong>keep_tello_alive()</strong></a></li><li><a href="#hand_keyboard_control" class="table-of-contents__link toc-highlight"><strong>hand_keyboard_control()</strong></a><ul><li><a href="#ver-o-frame-da-c√¢mera" class="table-of-contents__link toc-highlight"><em>Ver o frame da c√¢mera</em></a></li><li><a href="#n√£o-deixar-o-tello-pousar" class="table-of-contents__link toc-highlight"><em>N√£o deixar o Tello pousar</em></a></li><li><a href="#detectar-m√£os-no-tello-e-a-mais-perto-da-c√¢mera" class="table-of-contents__link toc-highlight"><em>Detectar m√£os no Tello e a mais perto da c√¢mera</em></a></li><li><a href="#verificar-posi√ß√£o-de-cada-dedo" class="table-of-contents__link toc-highlight"><em>Verificar posi√ß√£o de cada dedo</em></a></li><li><a href="#identificar-comando-vindo-do-teclado" class="table-of-contents__link toc-highlight"><em>Identificar comando vindo do teclado</em></a></li></ul></li><li><a href="#verify_commands" class="table-of-contents__link toc-highlight"><strong>verify_commands()</strong></a></li><li><a href="#follow_hand" class="table-of-contents__link toc-highlight"><strong>follow_hand()</strong></a></li><li><a href="#follow_camera_game" class="table-of-contents__link toc-highlight"><strong>follow_camera_game()</strong></a></li></ul></li><li><a href="#classe-interface" class="table-of-contents__link toc-highlight">Classe Interface</a><ul><li><a href="#init-1" class="table-of-contents__link toc-highlight"><strong>init()</strong></a></li><li><a href="#create_window" class="table-of-contents__link toc-highlight"><strong>create_window()</strong></a></li><li><a href="#print_commands" class="table-of-contents__link toc-highlight"><strong>print_commands()</strong></a></li><li><a href="#interface_loop" class="table-of-contents__link toc-highlight"><strong>interface_loop()</strong></a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/knowledge_base/docs/intro">Intro</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://skyrats.com.br/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Site<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.instagram.com/skyrats_drones/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Instagram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.facebook.com/skyrats/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/knowledge_base/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/SkyRats" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2023 Skyrats Knowledge Base. Built with Docusaurus.</div></div></div></footer></div>
<script src="/knowledge_base/assets/js/runtime~main.006661c3.js"></script>
<script src="/knowledge_base/assets/js/main.061fd660.js"></script>
</body>
</html>