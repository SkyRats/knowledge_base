"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[4373],{3905:function(e,o,a){a.d(o,{Zo:function(){return c},kt:function(){return f}});var r=a(7294);function t(e,o,a){return o in e?Object.defineProperty(e,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[o]=a,e}function n(e,o){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);o&&(r=r.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?n(Object(a),!0).forEach((function(o){t(e,o,a[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(a,o))}))}return e}function i(e,o){if(null==e)return{};var a,r,t=function(e,o){if(null==e)return{};var a,r,t={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],o.indexOf(a)>=0||(t[a]=e[a]);return t}(e,o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],o.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}var l=r.createContext({}),d=function(e){var o=r.useContext(l),a=o;return e&&(a="function"==typeof e?e(o):s(s({},o),e)),a},c=function(e){var o=d(e.components);return r.createElement(l.Provider,{value:o},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var o=e.children;return r.createElement(r.Fragment,{},o)}},p=r.forwardRef((function(e,o){var a=e.components,t=e.mdxType,n=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=d(a),p=t,f=u["".concat(l,".").concat(p)]||u[p]||m[p]||n;return a?r.createElement(f,s(s({ref:o},c),{},{components:a})):r.createElement(f,s({ref:o},c))}));function f(e,o){var a=arguments,t=o&&o.mdxType;if("string"==typeof e||t){var n=a.length,s=new Array(n);s[0]=p;var i={};for(var l in o)hasOwnProperty.call(o,l)&&(i[l]=o[l]);i.originalType=e,i[u]="string"==typeof e?e:t,s[1]=i;for(var d=2;d<n;d++)s[d]=a[d];return r.createElement.apply(null,s)}return r.createElement.apply(null,a)}p.displayName="MDXCreateElement"},4959:function(e,o,a){a.r(o),a.d(o,{contentTitle:function(){return l},default:function(){return p},frontMatter:function(){return i},metadata:function(){return d},toc:function(){return c}});var r=a(7462),t=a(3366),n=(a(7294),a(3905)),s=["components"],i={},l="RPLidar 360 S1",d={unversionedId:"old/Hardware/Componentes/RPLIDARS1360",id:"old/Hardware/Componentes/RPLIDARS1360",isDocsHomePage:!1,title:"RPLidar 360 S1",description:"Lidar360",source:"@site/../docs/old/Hardware/Componentes/RPLIDARS1360.md",sourceDirName:"old/Hardware/Componentes",slug:"/old/Hardware/Componentes/RPLIDARS1360",permalink:"/knowledge_base/docs/old/Hardware/Componentes/RPLIDARS1360",editUrl:"https://github.com/SkyRats/knowledge_base/tree/main/docs/../docs/old/Hardware/Componentes/RPLIDARS1360.md",tags:[],version:"current",frontMatter:{},sidebar:"docssidebar",previous:{title:"Como escolher um ESC?",permalink:"/knowledge_base/docs/old/Hardware/Componentes/ESCs"},next:{title:"Como funciona um transistor",permalink:"/knowledge_base/docs/old/Hardware/Componentes/Transistor"}},c=[{value:"1. Conex\xe3o em Hardwre",id:"1-conex\xe3o-em-hardwre",children:[],level:2},{value:"2. Driver/Firmwre/SDK",id:"2-driverfirmwresdk",children:[],level:2},{value:"3. Conex\xe3o com ROS",id:"3-conex\xe3o-com-ros",children:[],level:2},{value:"Aplica\xe7\xf5es externas",id:"aplica\xe7\xf5es-externas",children:[],level:2}],u={toc:c},m="wrapper";function p(e){var o=e.components,i=(0,t.Z)(e,s);return(0,n.kt)(m,(0,r.Z)({},u,i,{components:o,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"rplidar-360-s1"},"RPLidar 360 S1"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Lidar360",src:a(5506).Z}),"\n\xc9 um Lidar rotativo, mede as dist\xe2ncias entre o ambiente em 360 graus e o pr\xf3prio lidar, permitindo mapeamento e localiza\xe7\xe3o indoor, al\xe9m de desvio de obst\xe1culos"),(0,n.kt)("h2",{id:"1-conex\xe3o-em-hardwre"},"1. Conex\xe3o em Hardwre"),(0,n.kt)("p",null,'\xc9 praticamente um "plug \'n play", ele vem com tr\xeas cabos e um adaptador. O adaptador voc\xea consegue regular a baudrate de comunica\xe7\xe3o, e a entrada dele \xe9 conectada no USB do computador, e a outra seria um cabo de alimenta\xe7\xe3o, que no caso n\xe3o precisa ser conectado. J\xe1 a outra ponta do adaptador \xe9 s\xf3 conectar no Lidar.\nObs: A alimenta\xe7\xe3o do Lidar \xe9 de 5V e com consumo m\xe1ximo de 3A (Para n\xf3s nunca uma usb de 1A deixou de ser suficiente)'),(0,n.kt)("h2",{id:"2-driverfirmwresdk"},"2. Driver/Firmwre/SDK"),(0,n.kt)("p",null,"O driver que utilizamos para conectarmos diretamente o Lidar com o ROS \xe9 o feito pela Slamtec, em que a Skyrats tem um Fork espec\xedfico dele com a vers\xe3o mais recente do SDK(",(0,n.kt)("a",{parentName:"p",href:"https://github.com/SkyRats/rplidar_ros"},"https://github.com/SkyRats/rplidar_ros"),"). O que no reposit\xf3rio principal ainda est\xe1 desatualizado."),(0,n.kt)("p",null,"Al\xe9m disso, algumas vezes, testando conex\xf5es diferentes acabamos tendo problemas com a vers\xe3o do Firmware interno do Lidar que veio de f\xe1brica, e p/ isso a Slamtec ja fornece no site deles um instalador que faz o trabalho de compilar e dar upload do firmware(",(0,n.kt)("a",{parentName:"p",href:"https://www.slamtec.com/en/Support"},"https://www.slamtec.com/en/Support"),"), precisando apenas informar a porta e baudrate."),(0,n.kt)("p",null,"Dentro desse mesmo site a Slamtec fornece o SDK p/ todos os sistemas, e caso voc\xea queira fazer algo que n\xe3o esteja implementado no driver p/ ROS, todo o resto est\xe1 implementado em mais baixo n\xedvel la."),(0,n.kt)("h2",{id:"3-conex\xe3o-com-ros"},"3. Conex\xe3o com ROS"),(0,n.kt)("p",null,"O package rplidar_ros j\xe1 vem pronto para ser clonado em um catkin workspace e utilizado atrav\xe9s do comando roslaunch, como o nosso lidar \xe9 o S1, o arquivo que deve ser utilizado para nossas aplica\xe7\xf5es \xe9 o rplidar_s1.launch "),(0,n.kt)("p",null,"Para testes a respeito da leitura do sensor, tamb\xe9m pode ser usado o view_rplidar_s1.launch, que consiste na mesma coisa que o comando anterior com adi\xe7\xe3o de uma janela do rviz j\xe1 configurada para obter a leitura do laser"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"RViz",src:a(8910).Z}),"\nCaso algu\xe9m tenha interesse no funcionamento do node ROS com mais detalhes, o c\xf3digo fonte pode ser encontrado em src/node.cpp e \xe9 o unico presente neste package"),(0,n.kt)("p",null,'Em termos de t\xf3picos publicados, o funcionamento desse node \xe9 simples, contendo apenas um publisher. O t\xf3pico criado tem o nome de "scan" e recebe constantemente a leitura do sensor em formato sensor_msgs/LaserScan, que pode ser encontrado em ',(0,n.kt)("a",{parentName:"p",href:"http://docs.ros.org/en/api/sensor_msgs/html/msg/LaserScan.html"},"http://docs.ros.org/en/api/sensor_msgs/html/msg/LaserScan.html")),(0,n.kt)("p",null,"J\xe1 em servi\xe7os ROS, temos apenas dois: stop_motor e start_motor, ambos os quais recebem std_srvs/Empty e funcionam para ligar e desligar o motor do lidar"),(0,n.kt)("p",null,"Finalmente, quanto aos parametros, podem ser encontrados serial_port (string, default: /dev/ttyUSB0), serial_baudrate (int, default: 115200), frame_id (string, default: laser_frame), inverted (bool, default: false), angle_compensate (bool, default: false), scan_mode (string, default: std::string()). Exemplos de configura\xe7\xe3o desses parametros podem ser encontrados em diversos arquivos na pasta /launch e podem ser alterados para usos especificos.\nUm destaque especial deve ser feito ao scan_mode, visto que o valor default n\xe3o est\xe1 dispon\xedvel para o RPLidar 360 S1, e deve ser trocado para Standard ou Boost quanto iniciado atrav\xe9s de um .launch fora desse package."),(0,n.kt)("h2",{id:"aplica\xe7\xf5es-externas"},"Aplica\xe7\xf5es externas"),(0,n.kt)("p",null,"Aplica\xe7\xf5es externas comumente v\xe3o depender do t\xf3pico publicado, uma coisa importante para se lembrar \xe9 que muitas delas utilizam como padr\xe3o um t\xf3pico /laser/scan (\xe9 o que aparece para os casos de lidar simulado!), que deve ser trocado para apenas scan. Outro detalhe que complica o uso de softwares externos \xe9 o uso do ROS package tf2, que funciona para gerar diversos sistemas de coordenadas no rob\xf4 controlado, o que, por exemplo, \xe9 muito util para aplica\xe7\xf5es de localiza\xe7\xe3o e mapeamento (SLAM). Para esses casos, recomenda-se um estudo dos links do rob\xf4 em quest\xe3o e do laser para configurar corretamente o node que se deseja utilizar, a documenta\xe7\xe3o pode ser encontrada em ",(0,n.kt)("a",{parentName:"p",href:"http://wiki.ros.org/tf2"},"http://wiki.ros.org/tf2"),"\nUma solu\xe7\xe3o para uso em cima de nosso drone j\xe1 foi implementada e pode ser encontrada no repos\xedtorio motion_planning em nosso github (note que a configura\xe7\xe3o est\xe1 tanto em mapping_default.launch quanto em mapping.launch)"),(0,n.kt)("br",null),(0,n.kt)("br",null),(0,n.kt)("br",null),(0,n.kt)("br",null),(0,n.kt)("br",null),(0,n.kt)("br",null),(0,n.kt)("br",null),(0,n.kt)("br",null),(0,n.kt)("br",null),(0,n.kt)("br",null),(0,n.kt)("br",null),(0,n.kt)("br",null),(0,n.kt)("br",null),(0,n.kt)("br",null),(0,n.kt)("br",null),(0,n.kt)("br",null),(0,n.kt)("br",null),(0,n.kt)("br",null),(0,n.kt)("br",null),(0,n.kt)("br",null),(0,n.kt)("br",null),(0,n.kt)("br",null),(0,n.kt)("br",null),(0,n.kt)("br",null),(0,n.kt)("br",null),(0,n.kt)("br",null),(0,n.kt)("br",null),(0,n.kt)("br",null),"Tags: RPLidar 360 S1, Lidar 360 ROS, Drone, PX4, PX4 Lidar 360")}p.isMDXComponent=!0},5506:function(e,o,a){o.Z=a.p+"assets/images/LIDAR-03ab79d0cbecde3ff54ac954222f9175.jpg"},8910:function(e,o,a){o.Z=a.p+"assets/images/LIDAR360RVIZ-ddafdcbc9a0c7bc062de46146e696e54.gif"}}]);