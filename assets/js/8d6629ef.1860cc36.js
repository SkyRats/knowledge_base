"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[903],{3905:function(e,o,a){a.d(o,{Zo:function(){return l},kt:function(){return f}});var r=a(7294);function n(e,o,a){return o in e?Object.defineProperty(e,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[o]=a,e}function t(e,o){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);o&&(r=r.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?t(Object(a),!0).forEach((function(o){n(e,o,a[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(a,o))}))}return e}function s(e,o){if(null==e)return{};var a,r,n=function(e,o){if(null==e)return{};var a,r,n={},t=Object.keys(e);for(r=0;r<t.length;r++)a=t[r],o.indexOf(a)>=0||(n[a]=e[a]);return n}(e,o);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(r=0;r<t.length;r++)a=t[r],o.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var u=r.createContext({}),d=function(e){var o=r.useContext(u),a=o;return e&&(a="function"==typeof e?e(o):i(i({},o),e)),a},l=function(e){var o=d(e.components);return r.createElement(u.Provider,{value:o},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var o=e.children;return r.createElement(r.Fragment,{},o)}},p=r.forwardRef((function(e,o){var a=e.components,n=e.mdxType,t=e.originalType,u=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),c=d(a),p=n,f=c["".concat(u,".").concat(p)]||c[p]||m[p]||t;return a?r.createElement(f,i(i({ref:o},l),{},{components:a})):r.createElement(f,i({ref:o},l))}));function f(e,o){var a=arguments,n=o&&o.mdxType;if("string"==typeof e||n){var t=a.length,i=new Array(t);i[0]=p;var s={};for(var u in o)hasOwnProperty.call(o,u)&&(s[u]=o[u]);s.originalType=e,s[c]="string"==typeof e?e:n,i[1]=s;for(var d=2;d<t;d++)i[d]=a[d];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}p.displayName="MDXCreateElement"},636:function(e,o,a){a.r(o),a.d(o,{contentTitle:function(){return u},default:function(){return p},frontMatter:function(){return s},metadata:function(){return d},toc:function(){return l}});var r=a(7462),n=a(3366),t=(a(7294),a(3905)),i=["components"],s={},u="PID Tuning",d={unversionedId:"PID Tuning",id:"PID Tuning",isDocsHomePage:!1,title:"PID Tuning",description:"Escrito por Enzo Bel\xe9m. \xdaltima atualiza\xe7\xe3o: 05/08/2022",source:"@site/../docs/PID Tuning.md",sourceDirName:".",slug:"/PID Tuning",permalink:"/knowledge_base/docs/PID Tuning",editUrl:"https://github.com/SkyRats/knowledge_base/tree/main/docs/../docs/PID Tuning.md",tags:[],version:"current",frontMatter:{},sidebar:"docssidebar",previous:{title:"Conven\xe7\xf5es de C\xf3digo",permalink:"/knowledge_base/docs/Convencoes-de-Codigo"},next:{title:"Sky Hardware Quiz - Erros comuns e como resolv\xea-los",permalink:"/knowledge_base/docs/Sky Hardware Quiz - Erros comuns e como resolv\xea-los"}},l=[{value:"Background",id:"background",children:[],level:2},{value:"Defini\xe7\xf5es",id:"defini\xe7\xf5es",children:[],level:2},{value:"Calibrando",id:"calibrando",children:[],level:2},{value:"Cautelas",id:"cautelas",children:[],level:2},{value:"Refer\xeancias",id:"refer\xeancias",children:[],level:2}],c={toc:l},m="wrapper";function p(e){var o=e.components,a=(0,n.Z)(e,i);return(0,t.kt)(m,(0,r.Z)({},c,a,{components:o,mdxType:"MDXLayout"}),(0,t.kt)("h1",{id:"pid-tuning"},"PID Tuning"),(0,t.kt)("blockquote",null,(0,t.kt)("p",{parentName:"blockquote"},(0,t.kt)("em",{parentName:"p"},"Escrito por ",(0,t.kt)("a",{parentName:"em",href:"https://github.com/b3ls"},"Enzo Bel\xe9m"),". \xdaltima atualiza\xe7\xe3o: 05/08/2022"))),(0,t.kt)("h2",{id:"background"},"Background"),(0,t.kt)("p",null,"Essa parte \xe9 a hist\xf3ria de como o autor descobriu como usar o PID e deixou a equipe skyrats_drones muito feliz  (Altamente skip\xe1vel)."),(0,t.kt)("p",null,"Quando est\xe1vamos montando alguns drones para a Imav nos deparamos com um problema s\xe9rio de vibra\xe7\xe3o. Os drones saiam do ch\xe3o tremendo como se fossem uma pessoa calorenta na Ant\xe1rtida, isso fazia com que os motores esquentassem, GPS n\xe3o funcionasse e o drone n\xe3o voasse de forma correta e elegante. A pr\xedncipio parecia que era um problema mec\xe2nico, estando os motores girando na frequ\xeancia de resson\xe2ncia do sistema todo. O subsistema Hardware se prontificou para ter certeza de que o problema n\xe3o era relacionado aos componentes e aos softwares de controle do quadcopter. Dito isso, testamos PIDs em v\xe1rios drones esperando consertar a vibra\xe7\xe3o deles, contudo o resultado foi o oposto do esperado: Flipamos e quebramos (alguns) drones e pior, decepcionamos alguns subsistemas e colocamos a culpa na mec\xe2nica.\nFomos para casa tristes com o rabo entre as pernas mas como diz o ditado, o bom filho \xe0 casa torna e l\xe1 estava eu no CITI no dia seguinte 7h30 da manh\xe3 pesquisando solu\xe7\xf5es para o problema. Toda a internet dizia que o problema era PID e sabemos que tudo que est\xe1 l\xe1 \xe9 verdade, ent\xe3o o problema s\xf3 poderia ser do controle do drone que estava com par\xe2metro muito mal calibrados. Assim, fui eu testar botando na mente que a seguran\xe7a sempre vem em primeiro e assim, meus amigos, o resto \xe9 hist\xf3ra..."),(0,t.kt)("h2",{id:"defini\xe7\xf5es"},"Defini\xe7\xf5es"),(0,t.kt)("p",null,"-Proportional: Qu\xe3o responsivo \xe9 o drone. Quanto maior o valor, mais responsivo (sharper) ele ficar\xe1, contudo ele pode dar overshoot e acabar tendo vibra\xe7\xf5es de alta frequ\xeancia (analogia humana: uma pessoa com mt frio mexe a mand\xedbula bem r\xe1pido). Se o valor diminuir, ele ficar\xe1 menos responsivo, dando uma sensa\xe7\xe3o de bob\xe3o e acabar respondendo devagar/lentamente."),(0,t.kt)("p",null,"-Derivative: O quanto a controladora amortecer\xe1 o overshoot causado pelo P (analogia automobil\xedstica: o amortecedor de um carro para impedir que a suspens\xe3o fique balan\xe7ando depois de passar pela lombada). Se o valor for muito alto ele pode come\xe7ar a causar vibra\xe7\xe3o tamb\xe9m, causando superaquecimento do motor (ent\xe3o tome cuidado!). Se o valor for muito baixo o drone pode ficar bobo tamb\xe9m."),(0,t.kt)("p",null,"-Integral: \xc9 a responsividade do drone em rela\xe7\xe3o \xe0s for\xe7as externas, por exemplo o vento e o centro de gravidade deslocado. Seria como ele ficasse bem preso \xe0 posi\xe7\xe3o atual dele sem dar input no controle (incluindo a altitude). Se o valor est\xe1 muito baixo \xe9 poss\xedvel que ocorra drift principalmente na utiliza\xe7\xe3o do throttle. Se o I for muito alto \xe9 poss\xedvel que o quad n\xe3o responda bem e d\xea a sensa\xe7\xe3o que ele est\xe1 muito duro na hora do deslocamento (Parecido com um P baixo demais), al\xe9m disso \xe9 poss\xedvel que isso cause oscil\xe7\xf5es de baixa frequ\xeancia."),(0,t.kt)("h2",{id:"calibrando"},"Calibrando"),(0,t.kt)("p",null,"Geralmente, quando h\xe1 um problema de PID, um bom exerc\xedcio \xe9 ir diminuindo o P(ou K na QGround). Isso vai deixando o drone menos arisco e acaba resolvendo o problema na maioria dos casos. No entanto, ele pode ficar bem bobo, ent\xe3o se for necess\xe1rio aumentar a responsividade pode-se aumentar levemente o P e aumentar o D cautelosamente para queimar os motores.\nSe isso n\xe3o der certo, o motivo da oscila\xe7\xe3o pode ser um D excessivo, ent\xe3o o correto \xe9 diminuir o derivativo at\xe9 o ponto que ele pare e vibrar.\nO I muito provavelmente n\xe3o \xe9 a fonte do problema ent\xe3o o melhor mesmo \xe9 n\xe3o mexer nele, mexa apenas por curiosidade e se tiver problema de drift (nunca deu certo comigo mas pode dar com voc\xea)."),(0,t.kt)("h2",{id:"cautelas"},"Cautelas"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"Quando estiver na QGround, coloque o Thrust Curve para 0.3, desabilite o autotune e pode come\xe7ar a calibrar. Nunca esque\xe7a de mexer tanto no Pitch quanto no Roll!!!!!"),(0,t.kt)("li",{parentName:"ul"},"A QGround n\xe3o possui P, mas sim K. A \xfanica diferen\xe7a \xe9 que o K \xe9 o overall, isso significa que ele n\xe3o mexer\xe1 s\xf3 no P, mas sim em todos modos (P, I e D). Ent\xe3o se voc\xea mover os valores de K, \xe9 necess\xe1rio reduzir/aumentar os valores de D e I proporcionalmente.")),(0,t.kt)("h2",{id:"refer\xeancias"},"Refer\xeancias"),(0,t.kt)("p",null,(0,t.kt)("a",{parentName:"p",href:"https://oscarliang.com/quadcopter-pid-explained-tuning/"},"https://oscarliang.com/quadcopter-pid-explained-tuning/")))}p.isMDXComponent=!0}}]);