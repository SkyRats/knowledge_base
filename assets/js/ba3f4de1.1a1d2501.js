"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[130],{3905:function(e,o,a){a.d(o,{Zo:function(){return p},kt:function(){return u}});var r=a(7294);function n(e,o,a){return o in e?Object.defineProperty(e,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[o]=a,e}function t(e,o){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);o&&(r=r.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?t(Object(a),!0).forEach((function(o){n(e,o,a[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(a,o))}))}return e}function s(e,o){if(null==e)return{};var a,r,n=function(e,o){if(null==e)return{};var a,r,n={},t=Object.keys(e);for(r=0;r<t.length;r++)a=t[r],o.indexOf(a)>=0||(n[a]=e[a]);return n}(e,o);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(r=0;r<t.length;r++)a=t[r],o.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=r.createContext({}),d=function(e){var o=r.useContext(l),a=o;return e&&(a="function"==typeof e?e(o):i(i({},o),e)),a},p=function(e){var o=d(e.components);return r.createElement(l.Provider,{value:o},e.children)},c={inlineCode:"code",wrapper:function(e){var o=e.children;return r.createElement(r.Fragment,{},o)}},m=r.forwardRef((function(e,o){var a=e.components,n=e.mdxType,t=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=d(a),u=n,v=m["".concat(l,".").concat(u)]||m[u]||c[u]||t;return a?r.createElement(v,i(i({ref:o},p),{},{components:a})):r.createElement(v,i({ref:o},p))}));function u(e,o){var a=arguments,n=o&&o.mdxType;if("string"==typeof e||n){var t=a.length,i=new Array(t);i[0]=m;var s={};for(var l in o)hasOwnProperty.call(o,l)&&(s[l]=o[l]);s.originalType=e,s.mdxType="string"==typeof e?e:n,i[1]=s;for(var d=2;d<t;d++)i[d]=a[d];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}m.displayName="MDXCreateElement"},8217:function(e,o,a){a.r(o),a.d(o,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return d},toc:function(){return p},default:function(){return m}});var r=a(7462),n=a(3366),t=(a(7294),a(3905)),i=["components"],s={},l="Compilamento do Firmware e Calibra\xe7\xe3o do Drone",d={unversionedId:"Hardware/Firmware/IntroPX4",id:"Hardware/Firmware/IntroPX4",isDocsHomePage:!1,title:"Compilamento do Firmware e Calibra\xe7\xe3o do Drone",description:"Compilando Firmware",source:"@site/../docs/Hardware/Firmware/IntroPX4.md",sourceDirName:"Hardware/Firmware",slug:"/Hardware/Firmware/IntroPX4",permalink:"/knowledge_base/docs/Hardware/Firmware/IntroPX4",editUrl:"https://github.com/SkyRats/knowledge_base/tree/main/docs/../docs/Hardware/Firmware/IntroPX4.md",tags:[],version:"current",frontMatter:{},sidebar:"docssidebar",previous:{title:"Configura\xe7\xe3o dos R\xe1dio Controles (Taranis Q X7)",permalink:"/knowledge_base/docs/Hardware/Componentes/RCs/TaranisQX7"},next:{title:"MAVLINK",permalink:"/knowledge_base/docs/Hardware/Firmware/Introdu\xe7\xe3o ao MAVLink"}},p=[{value:"Compilando Firmware",id:"compilando-firmware",children:[],level:2},{value:"Calibra\xe7\xe3o",id:"calibra\xe7\xe3o",children:[],level:2}],c={toc:p};function m(e){var o=e.components,a=(0,n.Z)(e,i);return(0,t.kt)("wrapper",(0,r.Z)({},c,a,{components:o,mdxType:"MDXLayout"}),(0,t.kt)("h1",{id:"compilamento-do-firmware-e-calibra\xe7\xe3o-do-drone"},"Compilamento do Firmware e Calibra\xe7\xe3o do Drone"),(0,t.kt)("h2",{id:"compilando-firmware"},"Compilando Firmware"),(0,t.kt)("p",null,"O primeiro passo antes de come\xe7ar a compilar o Firmware \xe9 conectar o drone ao seu computador, portanto conecte-os utilizando-se de um cabo USB. "),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"OBS"),": Utilize o cabo pra conectar o drone ao computador! N\xe3o fa\xe7a pela telemetria pois compilar o firmware \xe9 uma tarefa pesada para se fazer por telemetria."),(0,t.kt)("p",null,"Depois de conectados, abra seu navegador de arquivos e v\xe1 at\xe9 sua pasta de drivers: ",(0,t.kt)("inlineCode",{parentName:"p"},"/Firmware/src/drivers"),". L\xe1 se encontram todos os seus drivers. Caso n\xe3o encontre o driver que procuras, baixe-o e salve nesta pasta.\nDepois de encontrar a pasta do Driver desejado, abra-o e procure pelo arquivo dos par\xe2metros, como por exemplo ",(0,t.kt)("inlineCode",{parentName:"p"},"parameters.c")," e altere o par\xe2metro de acordo com sua necessidade, desabilitando-o, habilitando-o e fazendo isso de acordo com seu tipo de entrada. "),(0,t.kt)("p",null,"Com os par\xe2metros do Firmware alterados, v\xe1 para ",(0,t.kt)("inlineCode",{parentName:"p"},"/Firmware/boards"),". Cada pasta encontrada aqui \xe9 um Firmware diferente, escolha portanto o Firmware o qual voc\xea utiliza. Escolhido um Firmware, selecione a vers\xe3o que voc\xea possui. No nosso caso o nosso caminho foi ",(0,t.kt)("inlineCode",{parentName:"p"},"/Firmware/boards/px4/fmu-v2/"),".\nNessa paste procure pelo arquivo o qual apresenta todos os drives habilitados ou n\xe3o habilitados, no nosso caso ele se chama ",(0,t.kt)("inlineCode",{parentName:"p"},"multicopter.cmake"),", mas ele pode apresentar outro nome no seu computador, isso tamb\xe9m  de acordo com o Firmware que voc\xea utiliza. Fa\xe7a uma copia dele e o renomeie da forma que for mais pr\xe1tica para voc\xea, pois voc\xea ir\xe1 utiliza-lo."),(0,t.kt)("p",null,"A pixhawk, controladora o qual usamos, apresenta uma mem\xf3ria limitada, uma caracter\xedstica de sistemas embarcados, e portanto geralmente habilita-se apenas os Drivers necess\xe1rios para compilar.\nHabilite ent\xe3o os drivers que voc\xea precisar, isso dentro do arquivo copiado e renomeado, pois n\xe3o queremos alterar o arquivo original. "),(0,t.kt)("p",null,"Feito isso, abra seu terminal e d\xea ",(0,t.kt)("inlineCode",{parentName:"p"},"/Firmware"),". Dado o comando, compile o Firmware utilizando-se do arquivo que voc\xea editou, no nosso caso o comando foi ",(0,t.kt)("inlineCode",{parentName:"p"},"make px4_fmu-v2_multicoptereditado"),".\nEle pode demorar um pouco, mas isso ocorre porque \xe9 um comando pesado.\nMas uma vez compilado, n\xe3o \xe9 necess\xe1rio compila-lo novamente a n\xe3o ser que haja mudan\xe7as nos Drivers ou no Firmware utilizado. "),(0,t.kt)("p",null,"Enquanto ele compila, \xe9 recomend\xe1vel que se salve os par\xe2metros de sua controladora antes de dar o upload do Firmware novo. Ele \xe9 um arquivo ",(0,t.kt)("inlineCode",{parentName:"p"},".params")," e pode ser salvado pelo QGroundControl.\nCom o QGroundControl abra o ",(0,t.kt)("inlineCode",{parentName:"p"},"Vehicle Setup")," (tr\xeas engrenagens na parte superios esquerda), des\xe7a at\xe9 os ",(0,t.kt)("inlineCode",{parentName:"p"},"Parameters"),", clique em ",(0,t.kt)("inlineCode",{parentName:"p"},"Tools")," (na parte superior direita), e selecione ",(0,t.kt)("inlineCode",{parentName:"p"},"Save to file .params")),(0,t.kt)("p",null,"Depois de compilado, basta dar o upload. No nosso caso o comando foi ",(0,t.kt)("inlineCode",{parentName:"p"},"make px4_fmu-v2_multicoptereditado upload"),".\nConclu\xeddo o upload, seu Firmware est\xe1 compilado e instalado na sua controladora de voo."),(0,t.kt)("p",null,"Caso precise de ajuda com o compilamento acesse: ",(0,t.kt)("a",{parentName:"p",href:"https://dev.px4.io/master/en/setup/building_px4.html"},"Building the code - PX4"),".  "),(0,t.kt)("hr",null),(0,t.kt)("h2",{id:"calibra\xe7\xe3o"},"Calibra\xe7\xe3o"),(0,t.kt)("p",null,"Para calibra\xe7\xe3o, iremos primeiro carregar o arquivo ",(0,t.kt)("inlineCode",{parentName:"p"},".params")," que foi salvo anteriormente, ou que possu\xedmos salvado no computador. Iremos ent\xe3o rebootar para que o processo se complete.\nUma forma bacana de fazer isso \xe9 abrindo o ",(0,t.kt)("inlineCode",{parentName:"p"},"Analyze")," (desenho de um papel com uma lupinha ao lado), indo em ",(0,t.kt)("inlineCode",{parentName:"p"},"MavLink Console")," e digitando na barra de comando inferior ",(0,t.kt)("inlineCode",{parentName:"p"},"reboot"),". "),(0,t.kt)("p",null,"Carregado os par\xe2metros e rebootado, precisamos selecionar o tipo de veiculo utilizado, portanto v\xe1 em ",(0,t.kt)("inlineCode",{parentName:"p"},"Vehicle Setup"),", abra o ",(0,t.kt)("inlineCode",{parentName:"p"},"Airframe")," e selecione o que condiz com o seu. "),(0,t.kt)("p",null,"Feito isso, \xe9 necess\xe1rio calibrar os sensores, ent\xe3o v\xe1 em ",(0,t.kt)("inlineCode",{parentName:"p"},"Sensors"),". Note que alguns deles apresentar\xe3o bolinhas vermelhas ao seu lado, este ser\xe3o os sensores que voc\xea precisar\xe1 calibrar. "),(0,t.kt)("p",null,"Para calibrar, ser\xe1 necess\xe1rio movimentar o drone, portanto \xe9 recomend\xe1vel que utilize-se da Telemetria pra estabelecer a comunica\xe7\xe3o entre o drone e o QGroundControl. Desconecte o cabo USB entre o drone e o computador, e tamb\xe9m o USB que liga a Jetson \xe0 Pixhawk, conecte a Ground station no seu computador e ligue o seu drone. Conclu\xeddo isso eles deveriam se conectar."),(0,t.kt)("p",null,"Uma vez conectados, note que no ",(0,t.kt)("inlineCode",{parentName:"p"},"Summary")," aparecem os mais variados itens, no qual se a bolinha apresenta-se vermelha, \xe9 necess\xe1rio uma corre\xe7\xe3o antes de executar um voo."),(0,t.kt)("p",null,"Novamente, em ",(0,t.kt)("inlineCode",{parentName:"p"},"Sensors"),", cheque os sensores que se apresentam em vermelho e os calibre. Clique no Sensor, aparecer\xe1 uma barra sua lateral direita, l\xe1 clique em ",(0,t.kt)("inlineCode",{parentName:"p"},"OK")," e ele te redirecionar\xe1 para a p\xe1gina de calibra\xe7\xe3o do sensor. Cada sensor possui tarefas espec\xedficas para que a calibra\xe7\xe3o seja feita, execute-as de acordo com as instru\xe7\xf5es e pronto, este sensor estar\xe1 calibrado. "),(0,t.kt)("p",null,"Um problema o que voc\xea pode se deparar \xe9 que sua controla de voo possui dire\xe7\xf5es pr\xe9 definidas como Yaw, Pitch e Roll, mas que n\xe3o condizem com a orienta\xe7\xe3o o qual voc\xea est\xe1 usando. Para corrigir, a aba que aparece a sua direita possui a op\xe7\xe3o de rotacionar essas orienta\xe7\xf5es girando determinada quantidade de graus entorno de tal eixo. Ap\xf3s selecionada a op\xe7\xe3o adequada \xe9 necess\xe1rio rebootar, depois de rebootar veja se o problema foi corrigido."),(0,t.kt)("p",null,"Caso precise de ajuda com as orienta\xe7\xf5es acesse: ",(0,t.kt)("a",{parentName:"p",href:"https://docs.px4.io/master/en/config/flight_controller_orientation.html"},"Roll, Pitch and Yaw - PX4"),"."))}m.isMDXComponent=!0}}]);