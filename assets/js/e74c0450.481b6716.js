"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[9314],{3905:function(e,o,r){r.d(o,{Zo:function(){return m},kt:function(){return d}});var a=r(7294);function n(e,o,r){return o in e?Object.defineProperty(e,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[o]=r,e}function t(e,o){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);o&&(a=a.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),r.push.apply(r,a)}return r}function s(e){for(var o=1;o<arguments.length;o++){var r=null!=arguments[o]?arguments[o]:{};o%2?t(Object(r),!0).forEach((function(o){n(e,o,r[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))}))}return e}function l(e,o){if(null==e)return{};var r,a,n=function(e,o){if(null==e)return{};var r,a,n={},t=Object.keys(e);for(a=0;a<t.length;a++)r=t[a],o.indexOf(r)>=0||(n[r]=e[r]);return n}(e,o);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(a=0;a<t.length;a++)r=t[a],o.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var i=a.createContext({}),p=function(e){var o=a.useContext(i),r=o;return e&&(r="function"==typeof e?e(o):s(s({},o),e)),r},m=function(e){var o=p(e.components);return a.createElement(i.Provider,{value:o},e.children)},u={inlineCode:"code",wrapper:function(e){var o=e.children;return a.createElement(a.Fragment,{},o)}},c=a.forwardRef((function(e,o){var r=e.components,n=e.mdxType,t=e.originalType,i=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),c=p(r),d=n,f=c["".concat(i,".").concat(d)]||c[d]||u[d]||t;return r?a.createElement(f,s(s({ref:o},m),{},{components:r})):a.createElement(f,s({ref:o},m))}));function d(e,o){var r=arguments,n=o&&o.mdxType;if("string"==typeof e||n){var t=r.length,s=new Array(t);s[0]=c;var l={};for(var i in o)hasOwnProperty.call(o,i)&&(l[i]=o[i]);l.originalType=e,l.mdxType="string"==typeof e?e:n,s[1]=l;for(var p=2;p<t;p++)s[p]=r[p];return a.createElement.apply(null,s)}return a.createElement.apply(null,r)}c.displayName="MDXCreateElement"},8624:function(e,o,r){r.r(o),r.d(o,{frontMatter:function(){return l},contentTitle:function(){return i},metadata:function(){return p},toc:function(){return m},default:function(){return c}});var a=r(7462),n=r(3366),t=(r(7294),r(3905)),s=["components"],l={},i=void 0,p={unversionedId:"Tello/errors",id:"Tello/errors",isDocsHomePage:!1,title:"errors",description:"---",source:"@site/../docs/Tello/errors.md",sourceDirName:"Tello",slug:"/Tello/errors",permalink:"/knowledge_base/docs/Tello/errors",editUrl:"https://github.com/SkyRats/knowledge_base/tree/main/docs/../docs/Tello/errors.md",tags:[],version:"current",frontMatter:{},sidebar:"docssidebar",previous:{title:"Gazebo",permalink:"/knowledge_base/docs/Simuladores/Gazebo"},next:{title:"ROS1",permalink:"/knowledge_base/docs/Voo autonomo/ros1"}},m=[{value:"sidebar_position: 1",id:"sidebar_position-1",children:[],level:2},{value:"Auto-landing",id:"auto-landing",children:[],level:2},{value:"Flip errors",id:"flip-errors",children:[],level:2}],u={toc:m};function c(e){var o=e.components,r=(0,n.Z)(e,s);return(0,t.kt)("wrapper",(0,a.Z)({},u,r,{components:o,mdxType:"MDXLayout"}),(0,t.kt)("hr",null),(0,t.kt)("h2",{id:"sidebar_position-1"},"sidebar_position: 1"),(0,t.kt)("h1",{id:"solucionando-erros"},"Solucionando erros"),(0,t.kt)("p",null,"Essa p\xe1gina tem o intuito de mostrar as solu\xe7\xf5es encontradas para lidar com erros que ocorrem naturalmente com o uso do Tello com scripts em Python, ou fora do aplicativo."),(0,t.kt)("h2",{id:"auto-landing"},"Auto-landing"),(0,t.kt)("p",null,"Um dos problemas comuns que ocorriam era o Tello pousar inesperadamente, sem motivos aparentes. Isso pode acontecer por algumas raz\xf5es:"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("p",{parentName:"li"},(0,t.kt)("strong",{parentName:"p"},"Pouca bateria"),": O Tello come\xe7a a piscar vermelho (como descrito na tabela do manual) e pousa. Vale a pena sempre mandar printar a bateria para monitorar isso."),(0,t.kt)("pre",{parentName:"li"},(0,t.kt)("code",{parentName:"pre"}," self.battery = self.tello.get_battery()\n print(self.battery) \n"))),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("p",{parentName:"li"},(0,t.kt)("strong",{parentName:"p"},"Muito tempo sem comandos"),': Quando o drone n\xe3o recebe um comando dentro de um determi-\nnado per\xedodo de tempo, ele pousa por motivos de seguran\xe7a (por exem-\nplo, quando seu programa caiu ou a conex\xe3o foi interrompida). Nesse\ncaso, o Tello pousa geralmente depois de 15 segundos sem receber co-\nmandos, piscando vermelho tamb \u0301em (mas \u201dsolid\u201d). Cuidado, portanto,\nse o seu c \u0301odigo tem time.sleep muito longo. Isso pode fazer o Tello pousar\nou perder conex \u0303ao. A pr\xf3pria biblioteca DJITelloPy tem seus pr\xf3prios\ntime.sleep embutidos, apesar de parecerem,  \xe1s vezes, insuficientes mesmo.\nA solu\xe7\xe3o encontrada para isso foi mandar um sinal de "command" para\no drone a cada 10 segundos (em segmentos do c\xf3digo que dependem de\ninput no computador e, por isso podem demorar, ou em loops que de-\npendem da detec\xe3o da m\xe3o para mandar comandos). Isso parece que\nresolveu o problema do Tello pousar automaticamente e n\xe3o prejudica\na seguran\xe7a, pois, se de fato perdermos a conex\xe3o com o Tello, ele ir\xe1\npousar automaticamente ap\xf3s 15 segundos. Veja abaixo a fun\xe7\xe3o:'))),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},'def keep_tello_alive(self):\n        # Manda sinal para o tello n\xe3o pousar. Criamos uma fun\xe7\xe3o, pois chamaremos em outra classe\n        if not SIMULATION:\n            self.tello.send_control_command("command")\n')),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("strong",{parentName:"li"},"Falta de tempo de espera"),": O contr\xe1rio tamb\xe9m pode acontecer. uando o Tello recebe comando sem ter terminado o  \xfaltimo,  \xe1s vezes\npode dar erro e ele acabar pousando. Isso ocorre principalmente logo ap\xf3s ",(0,t.kt)("em",{parentName:"li"},"takeoff"),". Mensagens de erro que ocorrem\nquando falta delay s\xe3o: ",(0,t.kt)("strong",{parentName:"li"},"error Not joystick")," ou ",(0,t.kt)("strong",{parentName:"li"},"Exception: Command 'xxxx' was unsuccessful for 4 tries."),", por exemplo. Nessa situa\xe7\xe3o, o Tello tamb\xe9m pisca vermelho e pousa. Tente colocar algum ",(0,t.kt)("em",{parentName:"li"},"time.sleep")," e veja se melhora. Ou, ainda, espere um pouco antes de rodar o programa logo ap\xf3s conectar com o Tello.")),(0,t.kt)("h2",{id:"flip-errors"},"Flip errors"),(0,t.kt)("p",null,"Outro erro comum ao rodar script de python com o Tello \xe9 que ele n\xe3o analisava o n\xedvel de bateria antes de mandar um comando de 'flip'. O problema \xe9 que abaixo de 50% de bateria, o drone n\xe3o d\xe1 flips. Ao receber um comando de 'flip' sem ter bateria suficiente, o drone retorna ",(0,t.kt)("strong",{parentName:"p"},"flip error")," e isso pode causar erros maiores no c\xf3digo como ",(0,t.kt)("strong",{parentName:"p"},"Exception: Command 'xxxx' was unsuccessful for 4 tries.")," que pode levar ao pouso autom\xe1tico. Logo, foi inclu\xeddo no c\xf3digo uma fun\xe7\xe3o que sempre verifica o n\xedvel de bateria e retorna se \xe9 poss\xedvel dar 'flip' ou n\xe3o (tudo armazenado na vari\xe1vel ",(0,t.kt)("em",{parentName:"p"},"self.tricks"),"):"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"}," def get_tello_battery(self):\n        if not SIMULATION:\n            self.battery = self.tello.get_battery()\n        else:\n            self.battery = BATTERY\n\n        if self.battery <= 50:\n            self.tricks = False\n        else:\n            self.tricks = True\n")))}c.isMDXComponent=!0}}]);